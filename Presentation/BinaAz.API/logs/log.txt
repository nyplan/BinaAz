2023-08-01 09:30:32.597 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2023-08-01 09:30:32.664 +04:00 [INF] Hosting environment: Development
2023-08-01 09:30:32.713 +04:00 [INF] Content root path: C:\Users\Nurlan Khankishiyev\RiderProjects\BinaAz\Presentation\BinaAz.API
2023-08-01 09:30:32.750 +04:00 [INF] Request starting HTTP/2 GET https://localhost:44371/swagger/index.html - -
2023-08-01 09:30:33.639 +04:00 [INF] Request finished HTTP/2 GET https://localhost:44371/swagger/index.html - - - 200 - text/html;charset=utf-8 893.7159ms
2023-08-01 09:30:34.617 +04:00 [INF] Request starting HTTP/2 GET https://localhost:44371/swagger/v1/swagger.json - -
2023-08-01 09:30:35.086 +04:00 [INF] Request finished HTTP/2 GET https://localhost:44371/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 469.6886ms
2023-08-01 09:33:25.530 +04:00 [INF] Request starting HTTP/2 POST https://localhost:44371/api/Auth/Login application/json 60
2023-08-01 09:33:25.659 +04:00 [INF] Executing endpoint 'BinaAz.API.Controllers.AuthController.Login (BinaAz.API)'
2023-08-01 09:33:25.709 +04:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(BinaAz.Application.Features.Commands.User.LoginUser.LoginUserCommandRequest) on controller BinaAz.API.Controllers.AuthController (BinaAz.API).
2023-08-01 09:33:28.989 +04:00 [INF] Executed DbCommand (34ms) [Parameters=[@__phoneOrEmail_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."CreatedAt", u."DeletedAt", u."Email", u."HashedPassword", u."Phone", u."RefreshToken", u."RefreshTokenExpires", u."Salt", u."UpdatedAt"
FROM "Users" AS u
WHERE u."Email" = @__phoneOrEmail_0 OR u."Phone" = @__phoneOrEmail_0
LIMIT 1
2023-08-01 09:33:29.490 +04:00 [INF] Executing OkObjectResult, writing value of type 'BinaAz.Application.Features.Commands.User.LoginUser.LoginUserCommandResponse'.
2023-08-01 09:33:29.520 +04:00 [INF] Executed action BinaAz.API.Controllers.AuthController.Login (BinaAz.API) in 3806.431ms
2023-08-01 09:33:29.522 +04:00 [INF] Executed endpoint 'BinaAz.API.Controllers.AuthController.Login (BinaAz.API)'
2023-08-01 09:33:29.543 +04:00 [INF] Request finished HTTP/2 POST https://localhost:44371/api/Auth/Login application/json 60 - 200 - application/json;+charset=utf-8 4013.2270ms
2023-08-01 09:34:04.537 +04:00 [INF] Request starting HTTP/2 POST https://localhost:44371/api/Companies/new - 0
2023-08-01 09:34:04.560 +04:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: No authentication handlers are registered. Did you forget to call AddAuthentication().Add[SomeAuthHandler]("Bearer",...)?
   at Microsoft.AspNetCore.Authentication.AuthenticationService.AuthenticateAsync(HttpContext context, String scheme)
   at Microsoft.AspNetCore.Authorization.Policy.PolicyEvaluator.AuthenticateAsync(AuthorizationPolicy policy, HttpContext context)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2023-08-01 09:34:04.636 +04:00 [INF] Request finished HTTP/2 POST https://localhost:44371/api/Companies/new - 0 - 500 - text/plain;+charset=utf-8 99.4747ms
2023-08-01 09:34:55.541 +04:00 [INF] Request starting HTTP/2 POST https://localhost:44371/api/Companies/new - 0
2023-08-01 09:34:55.550 +04:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: No authentication handlers are registered. Did you forget to call AddAuthentication().Add[SomeAuthHandler]("Bearer",...)?
   at Microsoft.AspNetCore.Authentication.AuthenticationService.AuthenticateAsync(HttpContext context, String scheme)
   at Microsoft.AspNetCore.Authorization.Policy.PolicyEvaluator.AuthenticateAsync(AuthorizationPolicy policy, HttpContext context)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2023-08-01 09:34:55.554 +04:00 [INF] Request finished HTTP/2 POST https://localhost:44371/api/Companies/new - 0 - 500 - text/plain;+charset=utf-8 12.1973ms
2023-08-01 09:35:20.720 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2023-08-01 09:35:20.756 +04:00 [INF] Hosting environment: Development
2023-08-01 09:35:20.758 +04:00 [INF] Content root path: C:\Users\Nurlan Khankishiyev\RiderProjects\BinaAz\Presentation\BinaAz.API
2023-08-01 09:35:20.851 +04:00 [INF] Request starting HTTP/2 GET https://localhost:44371/swagger/index.html - -
2023-08-01 09:35:21.406 +04:00 [INF] Request finished HTTP/2 GET https://localhost:44371/swagger/index.html - - - 200 - text/html;charset=utf-8 575.3527ms
2023-08-01 09:35:22.115 +04:00 [INF] Request starting HTTP/2 GET https://localhost:44371/swagger/v1/swagger.json - -
2023-08-01 09:35:22.382 +04:00 [INF] Request finished HTTP/2 GET https://localhost:44371/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 267.9492ms
2023-08-01 09:35:55.041 +04:00 [INF] Request starting HTTP/2 POST https://localhost:44371/api/Auth/Login application/json 60
2023-08-01 09:35:55.085 +04:00 [INF] Executing endpoint 'BinaAz.API.Controllers.AuthController.Login (BinaAz.API)'
2023-08-01 09:35:55.128 +04:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(BinaAz.Application.Features.Commands.User.LoginUser.LoginUserCommandRequest) on controller BinaAz.API.Controllers.AuthController (BinaAz.API).
2023-08-01 09:35:58.157 +04:00 [INF] Executed DbCommand (36ms) [Parameters=[@__phoneOrEmail_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."CreatedAt", u."DeletedAt", u."Email", u."HashedPassword", u."Phone", u."RefreshToken", u."RefreshTokenExpires", u."Salt", u."UpdatedAt"
FROM "Users" AS u
WHERE u."Email" = @__phoneOrEmail_0 OR u."Phone" = @__phoneOrEmail_0
LIMIT 1
2023-08-01 09:35:58.572 +04:00 [INF] Executing OkObjectResult, writing value of type 'BinaAz.Application.Features.Commands.User.LoginUser.LoginUserCommandResponse'.
2023-08-01 09:35:58.596 +04:00 [INF] Executed action BinaAz.API.Controllers.AuthController.Login (BinaAz.API) in 3461.4952ms
2023-08-01 09:35:58.598 +04:00 [INF] Executed endpoint 'BinaAz.API.Controllers.AuthController.Login (BinaAz.API)'
2023-08-01 09:35:58.619 +04:00 [INF] Request finished HTTP/2 POST https://localhost:44371/api/Auth/Login application/json 60 - 200 - application/json;+charset=utf-8 3577.9466ms
2023-08-01 09:36:19.177 +04:00 [INF] Request starting HTTP/2 POST https://localhost:44371/api/Companies/new - 0
2023-08-01 09:36:19.199 +04:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: No authentication handlers are registered. Did you forget to call AddAuthentication().Add[SomeAuthHandler]("Bearer",...)?
   at Microsoft.AspNetCore.Authentication.AuthenticationService.AuthenticateAsync(HttpContext context, String scheme)
   at Microsoft.AspNetCore.Authorization.Policy.PolicyEvaluator.AuthenticateAsync(AuthorizationPolicy policy, HttpContext context)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2023-08-01 09:36:19.270 +04:00 [INF] Request finished HTTP/2 POST https://localhost:44371/api/Companies/new - 0 - 500 - text/plain;+charset=utf-8 92.9006ms
2023-08-01 09:39:00.993 +04:00 [INF] User profile is available. Using 'C:\Users\Nurlan Khankishiyev\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2023-08-01 09:39:01.547 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2023-08-01 09:39:01.563 +04:00 [INF] Hosting environment: Development
2023-08-01 09:39:01.563 +04:00 [INF] Content root path: C:\Users\Nurlan Khankishiyev\RiderProjects\BinaAz\Presentation\BinaAz.API
2023-08-01 09:39:01.637 +04:00 [INF] Request starting HTTP/2 GET https://localhost:44371/swagger/index.html - -
2023-08-01 09:39:02.230 +04:00 [INF] Request finished HTTP/2 GET https://localhost:44371/swagger/index.html - - - 200 - text/html;charset=utf-8 594.8895ms
2023-08-01 09:39:03.209 +04:00 [INF] Request starting HTTP/2 GET https://localhost:44371/swagger/v1/swagger.json - -
2023-08-01 09:39:03.504 +04:00 [INF] Request finished HTTP/2 GET https://localhost:44371/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 295.9245ms
2023-08-01 09:39:20.238 +04:00 [INF] Request starting HTTP/2 POST https://localhost:44371/api/Auth/Login application/json 60
2023-08-01 09:39:20.402 +04:00 [INF] Executing endpoint 'BinaAz.API.Controllers.AuthController.Login (BinaAz.API)'
2023-08-01 09:39:20.438 +04:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(BinaAz.Application.Features.Commands.User.LoginUser.LoginUserCommandRequest) on controller BinaAz.API.Controllers.AuthController (BinaAz.API).
2023-08-01 09:39:23.242 +04:00 [INF] Executed DbCommand (28ms) [Parameters=[@__phoneOrEmail_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."CreatedAt", u."DeletedAt", u."Email", u."HashedPassword", u."Phone", u."RefreshToken", u."RefreshTokenExpires", u."Salt", u."UpdatedAt"
FROM "Users" AS u
WHERE u."Email" = @__phoneOrEmail_0 OR u."Phone" = @__phoneOrEmail_0
LIMIT 1
2023-08-01 09:39:23.575 +04:00 [INF] Executing OkObjectResult, writing value of type 'BinaAz.Application.Features.Commands.User.LoginUser.LoginUserCommandResponse'.
2023-08-01 09:39:23.598 +04:00 [INF] Executed action BinaAz.API.Controllers.AuthController.Login (BinaAz.API) in 3154.6277ms
2023-08-01 09:39:23.599 +04:00 [INF] Executed endpoint 'BinaAz.API.Controllers.AuthController.Login (BinaAz.API)'
2023-08-01 09:39:23.617 +04:00 [INF] Request finished HTTP/2 POST https://localhost:44371/api/Auth/Login application/json 60 - 200 - application/json;+charset=utf-8 3379.7652ms
2023-08-01 09:39:44.365 +04:00 [INF] Request starting HTTP/2 POST https://localhost:44371/api/Companies/new - 0
2023-08-01 09:39:44.535 +04:00 [INF] Executing endpoint 'BinaAz.API.Controllers.CompaniesController.New (BinaAz.API)'
2023-08-01 09:39:44.541 +04:00 [INF] Route matched with {action = "New", controller = "Companies"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] New() on controller BinaAz.API.Controllers.CompaniesController (BinaAz.API).
2023-08-01 09:39:44.554 +04:00 [INF] Executing StatusCodeResult, setting HTTP status code 200
2023-08-01 09:39:44.555 +04:00 [INF] Executed action BinaAz.API.Controllers.CompaniesController.New (BinaAz.API) in 13.4887ms
2023-08-01 09:39:44.555 +04:00 [INF] Executed endpoint 'BinaAz.API.Controllers.CompaniesController.New (BinaAz.API)'
2023-08-01 09:39:44.556 +04:00 [INF] Request finished HTTP/2 POST https://localhost:44371/api/Companies/new - 0 - 200 - - 190.6042ms
2023-08-01 09:40:00.595 +04:00 [INF] Request starting HTTP/2 GET https://localhost:44371/api/Auth/RefreshLogin?RefreshToken=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiI0NTJhZGY2Zi04ZTlhLTQ0M2QtOTUyYy1mMmMyMDIwYzcwNzkiLCJleHAiOjE2OTA4NzAxNjMsImlzcyI6Imh0dHBzOi8vbG9jYWxob3N0IiwiYXVkIjoiaHR0cHM6Ly9sb2NhbGhvc3QifQ.-ac9Lvi9mZl-0Z6RmTB9NZTCXp0BJHL57leiVLctWwg - -
2023-08-01 09:40:00.607 +04:00 [INF] Executing endpoint 'BinaAz.API.Controllers.AuthController.RefreshLogin (BinaAz.API)'
2023-08-01 09:40:00.622 +04:00 [INF] Route matched with {action = "RefreshLogin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RefreshLogin(BinaAz.Application.Features.Commands.User.RefreshLogin.RefreshLoginCommandRequest) on controller BinaAz.API.Controllers.AuthController (BinaAz.API).
2023-08-01 09:42:40.130 +04:00 [INF] Executed action BinaAz.API.Controllers.AuthController.RefreshLogin (BinaAz.API) in 159508.0627ms
2023-08-01 09:42:40.133 +04:00 [INF] Executed endpoint 'BinaAz.API.Controllers.AuthController.RefreshLogin (BinaAz.API)'
2023-08-01 09:42:40.145 +04:00 [ERR] An unhandled exception has occurred while executing the request.
System.Exception: Exception of type 'System.Exception' was thrown.
   at BinaAz.Persistence.Services.AuthService.RefreshLoginAsync(String refreshToken) in C:\Users\Nurlan Khankishiyev\RiderProjects\BinaAz\Infrastructure\BinaAz.Persistence\Services\AuthService.cs:line 72
   at BinaAz.Application.Features.Commands.User.RefreshLogin.RefreshLoginCommandHandler.Handle(RefreshLoginCommandRequest request, CancellationToken cancellationToken) in C:\Users\Nurlan Khankishiyev\RiderProjects\BinaAz\Core\BinaAz.Application\Features\Commands\User\RefreshLogin\RefreshLoginCommandHandler.cs:line 19
   at BinaAz.API.Controllers.AuthController.RefreshLogin(RefreshLoginCommandRequest request) in C:\Users\Nurlan Khankishiyev\RiderProjects\BinaAz\Presentation\BinaAz.API\Controllers\AuthController.cs:line 37
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2023-08-01 09:42:40.249 +04:00 [INF] Request finished HTTP/2 GET https://localhost:44371/api/Auth/RefreshLogin?RefreshToken=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiI0NTJhZGY2Zi04ZTlhLTQ0M2QtOTUyYy1mMmMyMDIwYzcwNzkiLCJleHAiOjE2OTA4NzAxNjMsImlzcyI6Imh0dHBzOi8vbG9jYWxob3N0IiwiYXVkIjoiaHR0cHM6Ly9sb2NhbGhvc3QifQ.-ac9Lvi9mZl-0Z6RmTB9NZTCXp0BJHL57leiVLctWwg - - - 500 - text/plain;+charset=utf-8 159653.8871ms
2023-08-01 09:58:18.928 +04:00 [INF] User profile is available. Using 'C:\Users\Nurlan Khankishiyev\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2023-08-01 09:58:19.519 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2023-08-01 09:58:19.520 +04:00 [INF] Hosting environment: Development
2023-08-01 09:58:19.520 +04:00 [INF] Content root path: C:\Users\Nurlan Khankishiyev\RiderProjects\BinaAz\Presentation\BinaAz.API
2023-08-01 09:58:19.645 +04:00 [INF] Request starting HTTP/2 GET https://localhost:44371/swagger/index.html - -
2023-08-01 09:58:20.059 +04:00 [INF] Request finished HTTP/2 GET https://localhost:44371/swagger/index.html - - - 200 - text/html;charset=utf-8 419.1836ms
2023-08-01 09:58:20.637 +04:00 [INF] Request starting HTTP/2 GET https://localhost:44371/swagger/v1/swagger.json - -
2023-08-01 09:58:20.861 +04:00 [INF] Request finished HTTP/2 GET https://localhost:44371/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 227.9168ms
2023-08-01 09:58:37.305 +04:00 [INF] Request starting HTTP/2 POST https://localhost:44371/api/Auth/Login application/json 60
2023-08-01 09:58:37.488 +04:00 [INF] Executing endpoint 'BinaAz.API.Controllers.AuthController.Login (BinaAz.API)'
2023-08-01 09:58:37.536 +04:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(BinaAz.Application.Features.Commands.User.LoginUser.LoginUserCommandRequest) on controller BinaAz.API.Controllers.AuthController (BinaAz.API).
2023-08-01 09:58:40.528 +04:00 [INF] Executed DbCommand (34ms) [Parameters=[@__phoneOrEmail_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."CreatedAt", u."DeletedAt", u."Email", u."HashedPassword", u."Phone", u."RefreshToken", u."RefreshTokenExpires", u."Salt", u."UpdatedAt"
FROM "Users" AS u
WHERE u."Email" = @__phoneOrEmail_0 OR u."Phone" = @__phoneOrEmail_0
LIMIT 1
2023-08-01 09:58:41.035 +04:00 [INF] Executed action BinaAz.API.Controllers.AuthController.Login (BinaAz.API) in 3494.2816ms
2023-08-01 09:58:41.038 +04:00 [INF] Executed endpoint 'BinaAz.API.Controllers.AuthController.Login (BinaAz.API)'
2023-08-01 09:58:41.211 +04:00 [ERR] An unhandled exception has occurred while executing the request.
System.ArgumentNullException: Value cannot be null. (Parameter 'value')
   at System.ArgumentNullException.Throw(String paramName)
   at System.ArgumentNullException.ThrowIfNull(Object argument, String paramName)
   at System.Security.Claims.Claim..ctor(String type, String value, String valueType, String issuer, String originalIssuer, ClaimsIdentity subject, String propertyKey, String propertyValue)
   at System.Security.Claims.Claim..ctor(String type, String value)
   at BinaAz.Infrastructure.Services.Token.TokenHandler.CreateAccessToken(User user) in C:\Users\Nurlan Khankishiyev\RiderProjects\BinaAz\Infrastructure\BinaAz.Infrastructure\Services\Token\TokenHandler.cs:line 31
   at BinaAz.Persistence.Services.AuthService.LoginAsync(String phoneOrEmail, String password, Int32 lifetime) in C:\Users\Nurlan Khankishiyev\RiderProjects\BinaAz\Infrastructure\BinaAz.Persistence\Services\AuthService.cs:line 36
   at BinaAz.Application.Features.Commands.User.LoginUser.LoginUserCommandHandler.Handle(LoginUserCommandRequest request, CancellationToken cancellationToken) in C:\Users\Nurlan Khankishiyev\RiderProjects\BinaAz\Core\BinaAz.Application\Features\Commands\User\LoginUser\LoginUserCommandHandler.cs:line 17
   at BinaAz.API.Controllers.AuthController.Login(LoginUserCommandRequest request) in C:\Users\Nurlan Khankishiyev\RiderProjects\BinaAz\Presentation\BinaAz.API\Controllers\AuthController.cs:line 30
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Program.<>c.<<<Main>$>b__0_2>d.MoveNext() in C:\Users\Nurlan Khankishiyev\RiderProjects\BinaAz\Presentation\BinaAz.API\Program.cs:line 106
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2023-08-01 09:58:41.333 +04:00 [INF] Request finished HTTP/2 POST https://localhost:44371/api/Auth/Login application/json 60 - 500 - text/plain;+charset=utf-8 4028.6022ms
2023-08-01 09:59:31.622 +04:00 [INF] User profile is available. Using 'C:\Users\Nurlan Khankishiyev\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2023-08-01 09:59:31.993 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2023-08-01 09:59:32.007 +04:00 [INF] Hosting environment: Development
2023-08-01 09:59:32.007 +04:00 [INF] Content root path: C:\Users\Nurlan Khankishiyev\RiderProjects\BinaAz\Presentation\BinaAz.API
2023-08-01 09:59:32.100 +04:00 [INF] Request starting HTTP/2 GET https://localhost:44371/swagger/index.html - -
2023-08-01 09:59:32.551 +04:00 [INF] Request finished HTTP/2 GET https://localhost:44371/swagger/index.html - - - 200 - text/html;charset=utf-8 470.8820ms
2023-08-01 09:59:33.161 +04:00 [INF] Request starting HTTP/2 GET https://localhost:44371/swagger/v1/swagger.json - -
2023-08-01 09:59:33.398 +04:00 [INF] Request finished HTTP/2 GET https://localhost:44371/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 237.4762ms
2023-08-01 09:59:39.470 +04:00 [INF] Request starting HTTP/2 POST https://localhost:44371/api/Auth/Login application/json 60
2023-08-01 09:59:39.683 +04:00 [INF] Executing endpoint 'BinaAz.API.Controllers.AuthController.Login (BinaAz.API)'
2023-08-01 09:59:39.734 +04:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(BinaAz.Application.Features.Commands.User.LoginUser.LoginUserCommandRequest) on controller BinaAz.API.Controllers.AuthController (BinaAz.API).
2023-08-01 09:59:43.841 +04:00 [INF] Executed DbCommand (43ms) [Parameters=[@__phoneOrEmail_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."CreatedAt", u."DeletedAt", u."Email", u."HashedPassword", u."Phone", u."RefreshToken", u."RefreshTokenExpires", u."Salt", u."UpdatedAt"
FROM "Users" AS u
WHERE u."Email" = @__phoneOrEmail_0 OR u."Phone" = @__phoneOrEmail_0
LIMIT 1
2023-08-01 09:59:44.253 +04:00 [INF] Executing OkObjectResult, writing value of type 'BinaAz.Application.Features.Commands.User.LoginUser.LoginUserCommandResponse'.
2023-08-01 09:59:44.280 +04:00 [INF] Executed action BinaAz.API.Controllers.AuthController.Login (BinaAz.API) in 4538.4697ms
2023-08-01 09:59:44.282 +04:00 [INF] Executed endpoint 'BinaAz.API.Controllers.AuthController.Login (BinaAz.API)'
2023-08-01 09:59:44.308 +04:00 [INF] Request finished HTTP/2 POST https://localhost:44371/api/Auth/Login application/json 60 - 200 - application/json;+charset=utf-8 4838.3301ms
2023-08-01 10:00:22.045 +04:00 [INF] Request starting HTTP/2 GET https://localhost:44371/api/Auth/RefreshLogin?RefreshToken=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiI5NDZjZDBmMC04ODBhLTQzOGUtYTg5My1iMDAzZDY1M2JmOTAiLCJleHAiOjE2OTA4NzEzODMsImlzcyI6Imh0dHBzOi8vbG9jYWxob3N0IiwiYXVkIjoiaHR0cHM6Ly9sb2NhbGhvc3QifQ.TkpGIzN4qBc1b9zTsw1Scl5DOaLk8kO83t5ht3eiAVk - -
2023-08-01 10:00:22.133 +04:00 [INF] Executing endpoint 'BinaAz.API.Controllers.AuthController.RefreshLogin (BinaAz.API)'
2023-08-01 10:00:22.142 +04:00 [INF] Route matched with {action = "RefreshLogin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RefreshLogin(BinaAz.Application.Features.Commands.User.RefreshLogin.RefreshLoginCommandRequest) on controller BinaAz.API.Controllers.AuthController (BinaAz.API).
2023-08-01 10:01:02.958 +04:00 [INF] Executed action BinaAz.API.Controllers.AuthController.RefreshLogin (BinaAz.API) in 40815.1896ms
2023-08-01 10:01:02.958 +04:00 [INF] Executed endpoint 'BinaAz.API.Controllers.AuthController.RefreshLogin (BinaAz.API)'
2023-08-01 10:01:02.999 +04:00 [ERR] An unhandled exception has occurred while executing the request.
System.Exception: Exception of type 'System.Exception' was thrown.
   at BinaAz.Persistence.Services.AuthService.RefreshLoginAsync(String refreshToken) in C:\Users\Nurlan Khankishiyev\RiderProjects\BinaAz\Infrastructure\BinaAz.Persistence\Services\AuthService.cs:line 73
   at BinaAz.Application.Features.Commands.User.RefreshLogin.RefreshLoginCommandHandler.Handle(RefreshLoginCommandRequest request, CancellationToken cancellationToken) in C:\Users\Nurlan Khankishiyev\RiderProjects\BinaAz\Core\BinaAz.Application\Features\Commands\User\RefreshLogin\RefreshLoginCommandHandler.cs:line 19
   at BinaAz.API.Controllers.AuthController.RefreshLogin(RefreshLoginCommandRequest request) in C:\Users\Nurlan Khankishiyev\RiderProjects\BinaAz\Presentation\BinaAz.API\Controllers\AuthController.cs:line 37
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Program.<>c.<<<Main>$>b__0_2>d.MoveNext() in C:\Users\Nurlan Khankishiyev\RiderProjects\BinaAz\Presentation\BinaAz.API\Program.cs:line 106
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2023-08-01 10:01:03.082 +04:00 [INF] Request finished HTTP/2 GET https://localhost:44371/api/Auth/RefreshLogin?RefreshToken=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiI5NDZjZDBmMC04ODBhLTQzOGUtYTg5My1iMDAzZDY1M2JmOTAiLCJleHAiOjE2OTA4NzEzODMsImlzcyI6Imh0dHBzOi8vbG9jYWxob3N0IiwiYXVkIjoiaHR0cHM6Ly9sb2NhbGhvc3QifQ.TkpGIzN4qBc1b9zTsw1Scl5DOaLk8kO83t5ht3eiAVk - - - 500 - text/plain;+charset=utf-8 41036.6981ms
2023-08-01 10:01:32.110 +04:00 [INF] Request starting HTTP/2 POST https://localhost:44371/api/Auth/Login application/json 65
2023-08-01 10:01:32.114 +04:00 [INF] Executing endpoint 'BinaAz.API.Controllers.AuthController.Login (BinaAz.API)'
2023-08-01 10:01:32.114 +04:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(BinaAz.Application.Features.Commands.User.LoginUser.LoginUserCommandRequest) on controller BinaAz.API.Controllers.AuthController (BinaAz.API).
2023-08-01 10:01:32.174 +04:00 [INF] Executed DbCommand (7ms) [Parameters=[@__phoneOrEmail_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."CreatedAt", u."DeletedAt", u."Email", u."HashedPassword", u."Phone", u."RefreshToken", u."RefreshTokenExpires", u."Salt", u."UpdatedAt"
FROM "Users" AS u
WHERE u."Email" = @__phoneOrEmail_0 OR u."Phone" = @__phoneOrEmail_0
LIMIT 1
2023-08-01 10:01:32.177 +04:00 [INF] Executing OkObjectResult, writing value of type 'BinaAz.Application.Features.Commands.User.LoginUser.LoginUserCommandResponse'.
2023-08-01 10:01:32.178 +04:00 [INF] Executed action BinaAz.API.Controllers.AuthController.Login (BinaAz.API) in 64.2895ms
2023-08-01 10:01:32.178 +04:00 [INF] Executed endpoint 'BinaAz.API.Controllers.AuthController.Login (BinaAz.API)'
2023-08-01 10:01:32.180 +04:00 [INF] Request finished HTTP/2 POST https://localhost:44371/api/Auth/Login application/json 65 - 200 - application/json;+charset=utf-8 69.5442ms
2023-08-01 10:02:08.460 +04:00 [INF] Request starting HTTP/2 GET https://localhost:44371/api/Auth/RefreshLogin?RefreshToken=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiJjMGQyYTBjZC1hODBmLTQ4NzEtYjNhMS05ZmQxMTRjY2QwYzkiLCJleHAiOjE2OTA4NzE0OTIsImlzcyI6Imh0dHBzOi8vbG9jYWxob3N0IiwiYXVkIjoiaHR0cHM6Ly9sb2NhbGhvc3QifQ.9dmXf3d9q-7WmX02QYPsn_XocPOzTtGj9NS9ZwW3Bd0 - -
2023-08-01 10:02:08.461 +04:00 [INF] Executing endpoint 'BinaAz.API.Controllers.AuthController.RefreshLogin (BinaAz.API)'
2023-08-01 10:02:08.462 +04:00 [INF] Route matched with {action = "RefreshLogin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RefreshLogin(BinaAz.Application.Features.Commands.User.RefreshLogin.RefreshLoginCommandRequest) on controller BinaAz.API.Controllers.AuthController (BinaAz.API).
2023-08-01 10:03:45.206 +04:00 [INF] Executed action BinaAz.API.Controllers.AuthController.RefreshLogin (BinaAz.API) in 96743.8996ms
2023-08-01 10:03:45.206 +04:00 [INF] Executed endpoint 'BinaAz.API.Controllers.AuthController.RefreshLogin (BinaAz.API)'
2023-08-01 10:03:45.245 +04:00 [ERR] An unhandled exception has occurred while executing the request.
System.Exception: Exception of type 'System.Exception' was thrown.
   at BinaAz.Persistence.Services.AuthService.RefreshLoginAsync(String refreshToken) in C:\Users\Nurlan Khankishiyev\RiderProjects\BinaAz\Infrastructure\BinaAz.Persistence\Services\AuthService.cs:line 73
   at BinaAz.Application.Features.Commands.User.RefreshLogin.RefreshLoginCommandHandler.Handle(RefreshLoginCommandRequest request, CancellationToken cancellationToken) in C:\Users\Nurlan Khankishiyev\RiderProjects\BinaAz\Core\BinaAz.Application\Features\Commands\User\RefreshLogin\RefreshLoginCommandHandler.cs:line 19
   at BinaAz.API.Controllers.AuthController.RefreshLogin(RefreshLoginCommandRequest request) in C:\Users\Nurlan Khankishiyev\RiderProjects\BinaAz\Presentation\BinaAz.API\Controllers\AuthController.cs:line 37
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Program.<>c.<<<Main>$>b__0_2>d.MoveNext() in C:\Users\Nurlan Khankishiyev\RiderProjects\BinaAz\Presentation\BinaAz.API\Program.cs:line 106
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2023-08-01 10:03:45.249 +04:00 [INF] Request finished HTTP/2 GET https://localhost:44371/api/Auth/RefreshLogin?RefreshToken=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiJjMGQyYTBjZC1hODBmLTQ4NzEtYjNhMS05ZmQxMTRjY2QwYzkiLCJleHAiOjE2OTA4NzE0OTIsImlzcyI6Imh0dHBzOi8vbG9jYWxob3N0IiwiYXVkIjoiaHR0cHM6Ly9sb2NhbGhvc3QifQ.9dmXf3d9q-7WmX02QYPsn_XocPOzTtGj9NS9ZwW3Bd0 - - - 500 - text/plain;+charset=utf-8 96789.5067ms
2023-08-01 10:30:30.432 +04:00 [INF] User profile is available. Using 'C:\Users\Nurlan Khankishiyev\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2023-08-01 10:30:30.763 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2023-08-01 10:30:30.764 +04:00 [INF] Hosting environment: Development
2023-08-01 10:30:30.764 +04:00 [INF] Content root path: C:\Users\Nurlan Khankishiyev\RiderProjects\BinaAz\Presentation\BinaAz.API
2023-08-01 10:30:30.840 +04:00 [INF] Request starting HTTP/2 GET https://localhost:44371/swagger/index.html - -
2023-08-01 10:30:31.341 +04:00 [INF] Request finished HTTP/2 GET https://localhost:44371/swagger/index.html - - - 200 - text/html;charset=utf-8 504.7129ms
2023-08-01 10:30:32.229 +04:00 [INF] Request starting HTTP/2 GET https://localhost:44371/swagger/v1/swagger.json - -
2023-08-01 10:30:32.442 +04:00 [INF] Request finished HTTP/2 GET https://localhost:44371/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 212.2615ms
2023-08-01 10:30:52.195 +04:00 [INF] Request starting HTTP/2 POST https://localhost:44371/api/Auth/Login application/json 65
2023-08-01 10:30:52.272 +04:00 [INF] Executing endpoint 'BinaAz.API.Controllers.AuthController.Login (BinaAz.API)'
2023-08-01 10:30:52.304 +04:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(BinaAz.Application.Features.Commands.User.LoginUser.LoginUserCommandRequest) on controller BinaAz.API.Controllers.AuthController (BinaAz.API).
2023-08-01 10:30:54.372 +04:00 [INF] Executed DbCommand (25ms) [Parameters=[@__phoneOrEmail_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."CreatedAt", u."DeletedAt", u."Email", u."HashedPassword", u."Phone", u."RefreshToken", u."RefreshTokenExpires", u."Salt", u."UpdatedAt"
FROM "Users" AS u
WHERE u."Email" = @__phoneOrEmail_0 OR u."Phone" = @__phoneOrEmail_0
LIMIT 1
2023-08-01 10:30:54.738 +04:00 [INF] Executed DbCommand (13ms) [Parameters=[@p9='?' (DbType = Guid), @p0='?' (DbType = DateTime), @p1='?' (DbType = DateTime), @p2='?', @p3='?', @p4='?', @p5='?', @p6='?' (DbType = DateTime), @p7='?', @p8='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Users" SET "CreatedAt" = @p0, "DeletedAt" = @p1, "Email" = @p2, "HashedPassword" = @p3, "Phone" = @p4, "RefreshToken" = @p5, "RefreshTokenExpires" = @p6, "Salt" = @p7, "UpdatedAt" = @p8
WHERE "Id" = @p9;
2023-08-01 10:30:54.762 +04:00 [INF] Executing OkObjectResult, writing value of type 'BinaAz.Application.Features.Commands.User.LoginUser.LoginUserCommandResponse'.
2023-08-01 10:30:54.782 +04:00 [INF] Executed action BinaAz.API.Controllers.AuthController.Login (BinaAz.API) in 2473.8151ms
2023-08-01 10:30:54.783 +04:00 [INF] Executed endpoint 'BinaAz.API.Controllers.AuthController.Login (BinaAz.API)'
2023-08-01 10:30:54.799 +04:00 [INF] Request finished HTTP/2 POST https://localhost:44371/api/Auth/Login application/json 65 - 200 - application/json;+charset=utf-8 2604.4701ms
2023-08-01 10:31:26.819 +04:00 [INF] Request starting HTTP/2 GET https://localhost:44371/api/Auth/RefreshLogin?RefreshToken=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiI4ODhlMTU3Mi1iZGNiLTRmMGYtOGNkYi05NjI1ZDgxNGZlMDIiLCJleHAiOjE2OTA4NzMyNTQsImlzcyI6Imh0dHBzOi8vbG9jYWxob3N0IiwiYXVkIjoiaHR0cHM6Ly9sb2NhbGhvc3QifQ.M1TqmPXALpWzz0IVybgcm7RDA5K_uwt_pLktvAIW6zk - -
2023-08-01 10:31:26.829 +04:00 [INF] Executing endpoint 'BinaAz.API.Controllers.AuthController.RefreshLogin (BinaAz.API)'
2023-08-01 10:31:26.845 +04:00 [INF] Route matched with {action = "RefreshLogin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RefreshLogin(BinaAz.Application.Features.Commands.User.RefreshLogin.RefreshLoginCommandRequest) on controller BinaAz.API.Controllers.AuthController (BinaAz.API).
2023-08-01 10:31:27.042 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__refreshToken_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."CreatedAt", u."DeletedAt", u."Email", u."HashedPassword", u."Phone", u."RefreshToken", u."RefreshTokenExpires", u."Salt", u."UpdatedAt"
FROM "Users" AS u
WHERE u."RefreshToken" = @__refreshToken_0
LIMIT 1
2023-08-01 10:31:27.054 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[@p9='?' (DbType = Guid), @p0='?' (DbType = DateTime), @p1='?' (DbType = DateTime), @p2='?', @p3='?', @p4='?', @p5='?', @p6='?' (DbType = DateTime), @p7='?', @p8='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Users" SET "CreatedAt" = @p0, "DeletedAt" = @p1, "Email" = @p2, "HashedPassword" = @p3, "Phone" = @p4, "RefreshToken" = @p5, "RefreshTokenExpires" = @p6, "Salt" = @p7, "UpdatedAt" = @p8
WHERE "Id" = @p9;
2023-08-01 10:31:27.057 +04:00 [INF] Executing OkObjectResult, writing value of type 'BinaAz.Application.Features.Commands.User.RefreshLogin.RefreshLoginCommandResponse'.
2023-08-01 10:31:27.060 +04:00 [INF] Executed action BinaAz.API.Controllers.AuthController.RefreshLogin (BinaAz.API) in 214.6232ms
2023-08-01 10:31:27.060 +04:00 [INF] Executed endpoint 'BinaAz.API.Controllers.AuthController.RefreshLogin (BinaAz.API)'
2023-08-01 10:31:27.063 +04:00 [INF] Request finished HTTP/2 GET https://localhost:44371/api/Auth/RefreshLogin?RefreshToken=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiI4ODhlMTU3Mi1iZGNiLTRmMGYtOGNkYi05NjI1ZDgxNGZlMDIiLCJleHAiOjE2OTA4NzMyNTQsImlzcyI6Imh0dHBzOi8vbG9jYWxob3N0IiwiYXVkIjoiaHR0cHM6Ly9sb2NhbGhvc3QifQ.M1TqmPXALpWzz0IVybgcm7RDA5K_uwt_pLktvAIW6zk - - - 200 - application/json;+charset=utf-8 243.2725ms
2023-08-01 10:31:46.474 +04:00 [INF] Request starting HTTP/2 GET https://localhost:44371/api/Auth/RefreshLogin?RefreshToken=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiI4ODhlMTU3Mi1iZGNiLTRmMGYtOGNkYi05NjI1ZDgxNGZlMDIiLCJleHAiOjE2OTA4NzMyNTQsImlzcyI6Imh0dHBzOi8vbG9jYWxob3N0IiwiYXVkIjoiaHR0cHM6Ly9sb2NhbGhvc3QifQ.M1TqmPXALpWzz0IVybgcm7RDA5K_uwt_pLktvAIW6zk - -
2023-08-01 10:31:46.484 +04:00 [INF] Executing endpoint 'BinaAz.API.Controllers.AuthController.RefreshLogin (BinaAz.API)'
2023-08-01 10:31:46.484 +04:00 [INF] Route matched with {action = "RefreshLogin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RefreshLogin(BinaAz.Application.Features.Commands.User.RefreshLogin.RefreshLoginCommandRequest) on controller BinaAz.API.Controllers.AuthController (BinaAz.API).
2023-08-01 10:31:46.514 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__refreshToken_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."CreatedAt", u."DeletedAt", u."Email", u."HashedPassword", u."Phone", u."RefreshToken", u."RefreshTokenExpires", u."Salt", u."UpdatedAt"
FROM "Users" AS u
WHERE u."RefreshToken" = @__refreshToken_0
LIMIT 1
2023-08-01 10:31:46.517 +04:00 [INF] Executed action BinaAz.API.Controllers.AuthController.RefreshLogin (BinaAz.API) in 32.1577ms
2023-08-01 10:31:46.518 +04:00 [INF] Executed endpoint 'BinaAz.API.Controllers.AuthController.RefreshLogin (BinaAz.API)'
2023-08-01 10:31:46.522 +04:00 [ERR] An unhandled exception has occurred while executing the request.
System.Exception: User Not Found
   at BinaAz.Persistence.Services.AuthService.RefreshLoginAsync(String refreshToken) in C:\Users\Nurlan Khankishiyev\RiderProjects\BinaAz\Infrastructure\BinaAz.Persistence\Services\AuthService.cs:line 47
   at BinaAz.Application.Features.Commands.User.RefreshLogin.RefreshLoginCommandHandler.Handle(RefreshLoginCommandRequest request, CancellationToken cancellationToken) in C:\Users\Nurlan Khankishiyev\RiderProjects\BinaAz\Core\BinaAz.Application\Features\Commands\User\RefreshLogin\RefreshLoginCommandHandler.cs:line 19
   at BinaAz.API.Controllers.AuthController.RefreshLogin(RefreshLoginCommandRequest request) in C:\Users\Nurlan Khankishiyev\RiderProjects\BinaAz\Presentation\BinaAz.API\Controllers\AuthController.cs:line 37
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Program.<>c.<<<Main>$>b__0_2>d.MoveNext() in C:\Users\Nurlan Khankishiyev\RiderProjects\BinaAz\Presentation\BinaAz.API\Program.cs:line 106
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2023-08-01 10:31:46.579 +04:00 [INF] Request finished HTTP/2 GET https://localhost:44371/api/Auth/RefreshLogin?RefreshToken=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiI4ODhlMTU3Mi1iZGNiLTRmMGYtOGNkYi05NjI1ZDgxNGZlMDIiLCJleHAiOjE2OTA4NzMyNTQsImlzcyI6Imh0dHBzOi8vbG9jYWxob3N0IiwiYXVkIjoiaHR0cHM6Ly9sb2NhbGhvc3QifQ.M1TqmPXALpWzz0IVybgcm7RDA5K_uwt_pLktvAIW6zk - - - 500 - text/plain;+charset=utf-8 105.7296ms
2023-08-01 10:32:07.473 +04:00 [INF] Request starting HTTP/2 GET https://localhost:44371/api/Auth/RefreshLogin?RefreshToken=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiIxMmIzOGI1My1lNDE5LTQyMGEtOGVmNS0wYTg1OWM2YjhkYzYiLCJleHAiOjE2OTA4NzMyODcsImlzcyI6Imh0dHBzOi8vbG9jYWxob3N0IiwiYXVkIjoiaHR0cHM6Ly9sb2NhbGhvc3QifQ.gBtHPR68igZ2CfVN1jAhBdLA094qugBwNKk-4l0Ma24 - -
2023-08-01 10:32:07.473 +04:00 [INF] Executing endpoint 'BinaAz.API.Controllers.AuthController.RefreshLogin (BinaAz.API)'
2023-08-01 10:32:07.473 +04:00 [INF] Route matched with {action = "RefreshLogin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RefreshLogin(BinaAz.Application.Features.Commands.User.RefreshLogin.RefreshLoginCommandRequest) on controller BinaAz.API.Controllers.AuthController (BinaAz.API).
2023-08-01 10:32:07.490 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__refreshToken_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."CreatedAt", u."DeletedAt", u."Email", u."HashedPassword", u."Phone", u."RefreshToken", u."RefreshTokenExpires", u."Salt", u."UpdatedAt"
FROM "Users" AS u
WHERE u."RefreshToken" = @__refreshToken_0
LIMIT 1
2023-08-01 10:32:07.499 +04:00 [INF] Executed DbCommand (6ms) [Parameters=[@p9='?' (DbType = Guid), @p0='?' (DbType = DateTime), @p1='?' (DbType = DateTime), @p2='?', @p3='?', @p4='?', @p5='?', @p6='?' (DbType = DateTime), @p7='?', @p8='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Users" SET "CreatedAt" = @p0, "DeletedAt" = @p1, "Email" = @p2, "HashedPassword" = @p3, "Phone" = @p4, "RefreshToken" = @p5, "RefreshTokenExpires" = @p6, "Salt" = @p7, "UpdatedAt" = @p8
WHERE "Id" = @p9;
2023-08-01 10:32:07.499 +04:00 [INF] Executing OkObjectResult, writing value of type 'BinaAz.Application.Features.Commands.User.RefreshLogin.RefreshLoginCommandResponse'.
2023-08-01 10:32:07.500 +04:00 [INF] Executed action BinaAz.API.Controllers.AuthController.RefreshLogin (BinaAz.API) in 26.4327ms
2023-08-01 10:32:07.500 +04:00 [INF] Executed endpoint 'BinaAz.API.Controllers.AuthController.RefreshLogin (BinaAz.API)'
2023-08-01 10:32:07.500 +04:00 [INF] Request finished HTTP/2 GET https://localhost:44371/api/Auth/RefreshLogin?RefreshToken=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiIxMmIzOGI1My1lNDE5LTQyMGEtOGVmNS0wYTg1OWM2YjhkYzYiLCJleHAiOjE2OTA4NzMyODcsImlzcyI6Imh0dHBzOi8vbG9jYWxob3N0IiwiYXVkIjoiaHR0cHM6Ly9sb2NhbGhvc3QifQ.gBtHPR68igZ2CfVN1jAhBdLA094qugBwNKk-4l0Ma24 - - - 200 - application/json;+charset=utf-8 27.6845ms
2023-08-01 10:33:09.252 +04:00 [INF] Application is shutting down...
2023-08-01 10:36:40.687 +04:00 [INF] User profile is available. Using 'C:\Users\Nurlan Khankishiyev\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2023-08-01 10:36:40.877 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2023-08-01 10:36:40.878 +04:00 [INF] Hosting environment: Development
2023-08-01 10:36:40.878 +04:00 [INF] Content root path: C:\Users\Nurlan Khankishiyev\RiderProjects\BinaAz\Presentation\BinaAz.API
2023-08-01 10:36:40.929 +04:00 [INF] Request starting HTTP/2 GET https://localhost:44371/swagger/index.html - -
2023-08-01 10:36:41.317 +04:00 [INF] Request finished HTTP/2 GET https://localhost:44371/swagger/index.html - - - 200 - text/html;charset=utf-8 394.6092ms
2023-08-01 10:36:42.048 +04:00 [INF] Request starting HTTP/2 GET https://localhost:44371/swagger/v1/swagger.json - -
2023-08-01 10:36:42.307 +04:00 [INF] Request finished HTTP/2 GET https://localhost:44371/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 259.9622ms
2023-08-01 10:36:55.910 +04:00 [INF] Request starting HTTP/2 POST https://localhost:44371/api/Auth/Login application/json 65
2023-08-01 10:36:55.961 +04:00 [INF] Executing endpoint 'BinaAz.API.Controllers.AuthController.Login (BinaAz.API)'
2023-08-01 10:36:55.991 +04:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(BinaAz.Application.Features.Commands.User.LoginUser.LoginUserCommandRequest) on controller BinaAz.API.Controllers.AuthController (BinaAz.API).
2023-08-01 10:36:58.090 +04:00 [INF] Executed DbCommand (29ms) [Parameters=[@__phoneOrEmail_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."CreatedAt", u."DeletedAt", u."Email", u."HashedPassword", u."Phone", u."RefreshToken", u."RefreshTokenExpires", u."Salt", u."UpdatedAt"
FROM "Users" AS u
WHERE u."Email" = @__phoneOrEmail_0 OR u."Phone" = @__phoneOrEmail_0
LIMIT 1
2023-08-01 10:36:58.479 +04:00 [INF] Executed DbCommand (16ms) [Parameters=[@p9='?' (DbType = Guid), @p0='?' (DbType = DateTime), @p1='?' (DbType = DateTime), @p2='?', @p3='?', @p4='?', @p5='?', @p6='?' (DbType = DateTime), @p7='?', @p8='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Users" SET "CreatedAt" = @p0, "DeletedAt" = @p1, "Email" = @p2, "HashedPassword" = @p3, "Phone" = @p4, "RefreshToken" = @p5, "RefreshTokenExpires" = @p6, "Salt" = @p7, "UpdatedAt" = @p8
WHERE "Id" = @p9;
2023-08-01 10:36:58.516 +04:00 [INF] Executing OkObjectResult, writing value of type 'BinaAz.Application.Features.Commands.User.LoginUser.LoginUserCommandResponse'.
2023-08-01 10:36:58.546 +04:00 [INF] Executed action BinaAz.API.Controllers.AuthController.Login (BinaAz.API) in 2548.913ms
2023-08-01 10:36:58.547 +04:00 [INF] Executed endpoint 'BinaAz.API.Controllers.AuthController.Login (BinaAz.API)'
2023-08-01 10:36:58.572 +04:00 [INF] Request finished HTTP/2 POST https://localhost:44371/api/Auth/Login application/json 65 - 200 - application/json;+charset=utf-8 2661.7009ms
2023-08-01 10:40:00.791 +04:00 [INF] Request starting HTTP/2 GET https://localhost:44371/api/Auth/RefreshLogin?RefreshToken=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJodHRwczovL2xvY2FsaG9zdCIsImF1ZCI6Imh0dHBzOi8vbG9jYWxob3N0In0.7WyKhWM0t0mqdgw2x1y8lwjFcK1WYEVj-ZFpucUWZgY - -
2023-08-01 10:40:00.801 +04:00 [INF] Executing endpoint 'BinaAz.API.Controllers.AuthController.RefreshLogin (BinaAz.API)'
2023-08-01 10:40:00.809 +04:00 [INF] Route matched with {action = "RefreshLogin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RefreshLogin(BinaAz.Application.Features.Commands.User.RefreshLogin.RefreshLoginCommandRequest) on controller BinaAz.API.Controllers.AuthController (BinaAz.API).
2023-08-01 10:40:00.922 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__refreshToken_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."CreatedAt", u."DeletedAt", u."Email", u."HashedPassword", u."Phone", u."RefreshToken", u."RefreshTokenExpires", u."Salt", u."UpdatedAt"
FROM "Users" AS u
WHERE u."RefreshToken" = @__refreshToken_0
LIMIT 1
2023-08-01 10:40:00.935 +04:00 [INF] Executed DbCommand (7ms) [Parameters=[@p9='?' (DbType = Guid), @p0='?' (DbType = DateTime), @p1='?' (DbType = DateTime), @p2='?', @p3='?', @p4='?', @p5='?', @p6='?' (DbType = DateTime), @p7='?', @p8='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Users" SET "CreatedAt" = @p0, "DeletedAt" = @p1, "Email" = @p2, "HashedPassword" = @p3, "Phone" = @p4, "RefreshToken" = @p5, "RefreshTokenExpires" = @p6, "Salt" = @p7, "UpdatedAt" = @p8
WHERE "Id" = @p9;
2023-08-01 10:40:00.938 +04:00 [INF] Executing OkObjectResult, writing value of type 'BinaAz.Application.Features.Commands.User.RefreshLogin.RefreshLoginCommandResponse'.
2023-08-01 10:40:00.940 +04:00 [INF] Executed action BinaAz.API.Controllers.AuthController.RefreshLogin (BinaAz.API) in 130.8094ms
2023-08-01 10:40:00.940 +04:00 [INF] Executed endpoint 'BinaAz.API.Controllers.AuthController.RefreshLogin (BinaAz.API)'
2023-08-01 10:40:00.943 +04:00 [INF] Request finished HTTP/2 GET https://localhost:44371/api/Auth/RefreshLogin?RefreshToken=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJodHRwczovL2xvY2FsaG9zdCIsImF1ZCI6Imh0dHBzOi8vbG9jYWxob3N0In0.7WyKhWM0t0mqdgw2x1y8lwjFcK1WYEVj-ZFpucUWZgY - - - 200 - application/json;+charset=utf-8 151.8442ms
2023-08-01 10:40:38.208 +04:00 [INF] Application is shutting down...
2023-08-01 10:47:18.389 +04:00 [INF] User profile is available. Using 'C:\Users\Nurlan Khankishiyev\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2023-08-01 10:47:18.521 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2023-08-01 10:47:18.522 +04:00 [INF] Hosting environment: Development
2023-08-01 10:47:18.522 +04:00 [INF] Content root path: C:\Users\Nurlan Khankishiyev\RiderProjects\BinaAz\Presentation\BinaAz.API
2023-08-01 10:47:18.551 +04:00 [INF] Request starting HTTP/2 GET https://localhost:44371/swagger/index.html - -
2023-08-01 10:47:18.856 +04:00 [INF] Request finished HTTP/2 GET https://localhost:44371/swagger/index.html - - - 200 - text/html;charset=utf-8 309.3610ms
2023-08-01 10:47:19.367 +04:00 [INF] Request starting HTTP/2 GET https://localhost:44371/swagger/v1/swagger.json - -
2023-08-01 10:47:19.623 +04:00 [INF] Request finished HTTP/2 GET https://localhost:44371/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 256.3998ms
2023-08-01 10:47:41.095 +04:00 [INF] Request starting HTTP/2 POST https://localhost:44371/api/Auth/Login application/json 60
2023-08-01 10:47:41.154 +04:00 [INF] Executing endpoint 'BinaAz.API.Controllers.AuthController.Login (BinaAz.API)'
2023-08-01 10:47:41.187 +04:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(BinaAz.Application.Features.Commands.User.LoginUser.LoginUserCommandRequest) on controller BinaAz.API.Controllers.AuthController (BinaAz.API).
2023-08-01 10:47:43.618 +04:00 [INF] Executed DbCommand (37ms) [Parameters=[@__phoneOrEmail_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."CreatedAt", u."DeletedAt", u."Email", u."HashedPassword", u."Phone", u."RefreshToken", u."RefreshTokenExpires", u."Salt", u."UpdatedAt"
FROM "Users" AS u
WHERE u."Email" = @__phoneOrEmail_0 OR u."Phone" = @__phoneOrEmail_0
LIMIT 1
2023-08-01 10:47:44.024 +04:00 [INF] Executed DbCommand (9ms) [Parameters=[@p9='?' (DbType = Guid), @p0='?' (DbType = DateTime), @p1='?' (DbType = DateTime), @p2='?', @p3='?', @p4='?', @p5='?', @p6='?' (DbType = DateTime), @p7='?', @p8='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Users" SET "CreatedAt" = @p0, "DeletedAt" = @p1, "Email" = @p2, "HashedPassword" = @p3, "Phone" = @p4, "RefreshToken" = @p5, "RefreshTokenExpires" = @p6, "Salt" = @p7, "UpdatedAt" = @p8
WHERE "Id" = @p9;
2023-08-01 10:47:44.052 +04:00 [INF] Executing OkObjectResult, writing value of type 'BinaAz.Application.Features.Commands.User.LoginUser.LoginUserCommandResponse'.
2023-08-01 10:47:44.069 +04:00 [INF] Executed action BinaAz.API.Controllers.AuthController.Login (BinaAz.API) in 2878.1145ms
2023-08-01 10:47:44.070 +04:00 [INF] Executed endpoint 'BinaAz.API.Controllers.AuthController.Login (BinaAz.API)'
2023-08-01 10:47:44.087 +04:00 [INF] Request finished HTTP/2 POST https://localhost:44371/api/Auth/Login application/json 60 - 200 - application/json;+charset=utf-8 2991.1336ms
2023-08-01 10:48:12.520 +04:00 [INF] Request starting HTTP/2 GET https://localhost:44371/api/Auth/RefreshLogin?RefreshToken=eIEfAY40VnoiAWMcpWG5QlyVKNSkPvwtQUIOqfxqTxM%3D - -
2023-08-01 10:48:12.531 +04:00 [INF] Executing endpoint 'BinaAz.API.Controllers.AuthController.RefreshLogin (BinaAz.API)'
2023-08-01 10:48:12.542 +04:00 [INF] Route matched with {action = "RefreshLogin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RefreshLogin(BinaAz.Application.Features.Commands.User.RefreshLogin.RefreshLoginCommandRequest) on controller BinaAz.API.Controllers.AuthController (BinaAz.API).
2023-08-01 10:48:12.663 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__refreshToken_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."CreatedAt", u."DeletedAt", u."Email", u."HashedPassword", u."Phone", u."RefreshToken", u."RefreshTokenExpires", u."Salt", u."UpdatedAt"
FROM "Users" AS u
WHERE u."RefreshToken" = @__refreshToken_0
LIMIT 1
2023-08-01 10:48:12.678 +04:00 [INF] Executed DbCommand (7ms) [Parameters=[@p9='?' (DbType = Guid), @p0='?' (DbType = DateTime), @p1='?' (DbType = DateTime), @p2='?', @p3='?', @p4='?', @p5='?', @p6='?' (DbType = DateTime), @p7='?', @p8='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Users" SET "CreatedAt" = @p0, "DeletedAt" = @p1, "Email" = @p2, "HashedPassword" = @p3, "Phone" = @p4, "RefreshToken" = @p5, "RefreshTokenExpires" = @p6, "Salt" = @p7, "UpdatedAt" = @p8
WHERE "Id" = @p9;
2023-08-01 10:48:12.681 +04:00 [INF] Executing OkObjectResult, writing value of type 'BinaAz.Application.Features.Commands.User.RefreshLogin.RefreshLoginCommandResponse'.
2023-08-01 10:48:12.683 +04:00 [INF] Executed action BinaAz.API.Controllers.AuthController.RefreshLogin (BinaAz.API) in 141.3057ms
2023-08-01 10:48:12.684 +04:00 [INF] Executed endpoint 'BinaAz.API.Controllers.AuthController.RefreshLogin (BinaAz.API)'
2023-08-01 10:48:12.686 +04:00 [INF] Request finished HTTP/2 GET https://localhost:44371/api/Auth/RefreshLogin?RefreshToken=eIEfAY40VnoiAWMcpWG5QlyVKNSkPvwtQUIOqfxqTxM%3D - - - 200 - application/json;+charset=utf-8 165.3386ms
2023-08-01 10:48:29.293 +04:00 [INF] Request starting HTTP/2 GET https://localhost:44371/api/Auth/RefreshLogin?RefreshToken=cQAv0yih2rpbpul1EN%2BLyG9lFe3s3DKVVuCVPX3XYvw%3D - -
2023-08-01 10:48:29.305 +04:00 [INF] Executing endpoint 'BinaAz.API.Controllers.AuthController.RefreshLogin (BinaAz.API)'
2023-08-01 10:48:29.306 +04:00 [INF] Route matched with {action = "RefreshLogin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RefreshLogin(BinaAz.Application.Features.Commands.User.RefreshLogin.RefreshLoginCommandRequest) on controller BinaAz.API.Controllers.AuthController (BinaAz.API).
2023-08-01 10:48:29.339 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__refreshToken_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."CreatedAt", u."DeletedAt", u."Email", u."HashedPassword", u."Phone", u."RefreshToken", u."RefreshTokenExpires", u."Salt", u."UpdatedAt"
FROM "Users" AS u
WHERE u."RefreshToken" = @__refreshToken_0
LIMIT 1
2023-08-01 10:48:29.342 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[@p9='?' (DbType = Guid), @p0='?' (DbType = DateTime), @p1='?' (DbType = DateTime), @p2='?', @p3='?', @p4='?', @p5='?', @p6='?' (DbType = DateTime), @p7='?', @p8='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Users" SET "CreatedAt" = @p0, "DeletedAt" = @p1, "Email" = @p2, "HashedPassword" = @p3, "Phone" = @p4, "RefreshToken" = @p5, "RefreshTokenExpires" = @p6, "Salt" = @p7, "UpdatedAt" = @p8
WHERE "Id" = @p9;
2023-08-01 10:48:29.342 +04:00 [INF] Executing OkObjectResult, writing value of type 'BinaAz.Application.Features.Commands.User.RefreshLogin.RefreshLoginCommandResponse'.
2023-08-01 10:48:29.343 +04:00 [INF] Executed action BinaAz.API.Controllers.AuthController.RefreshLogin (BinaAz.API) in 37.1122ms
2023-08-01 10:48:29.343 +04:00 [INF] Executed endpoint 'BinaAz.API.Controllers.AuthController.RefreshLogin (BinaAz.API)'
2023-08-01 10:48:29.343 +04:00 [INF] Request finished HTTP/2 GET https://localhost:44371/api/Auth/RefreshLogin?RefreshToken=cQAv0yih2rpbpul1EN%2BLyG9lFe3s3DKVVuCVPX3XYvw%3D - - - 200 - application/json;+charset=utf-8 49.9947ms
2023-08-01 10:49:05.556 +04:00 [INF] Request starting HTTP/2 GET https://localhost:44371/api/Auth/RefreshLogin?RefreshToken=%2BPaiKOg1kROBY0PVXHcR6omqaHwXV%2FfwfTj9dOTTvLc%3D - -
2023-08-01 10:49:05.557 +04:00 [INF] Executing endpoint 'BinaAz.API.Controllers.AuthController.RefreshLogin (BinaAz.API)'
2023-08-01 10:49:05.557 +04:00 [INF] Route matched with {action = "RefreshLogin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RefreshLogin(BinaAz.Application.Features.Commands.User.RefreshLogin.RefreshLoginCommandRequest) on controller BinaAz.API.Controllers.AuthController (BinaAz.API).
2023-08-01 10:49:05.572 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__refreshToken_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."CreatedAt", u."DeletedAt", u."Email", u."HashedPassword", u."Phone", u."RefreshToken", u."RefreshTokenExpires", u."Salt", u."UpdatedAt"
FROM "Users" AS u
WHERE u."RefreshToken" = @__refreshToken_0
LIMIT 1
2023-08-01 10:49:05.574 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[@p9='?' (DbType = Guid), @p0='?' (DbType = DateTime), @p1='?' (DbType = DateTime), @p2='?', @p3='?', @p4='?', @p5='?', @p6='?' (DbType = DateTime), @p7='?', @p8='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Users" SET "CreatedAt" = @p0, "DeletedAt" = @p1, "Email" = @p2, "HashedPassword" = @p3, "Phone" = @p4, "RefreshToken" = @p5, "RefreshTokenExpires" = @p6, "Salt" = @p7, "UpdatedAt" = @p8
WHERE "Id" = @p9;
2023-08-01 10:49:05.574 +04:00 [INF] Executing OkObjectResult, writing value of type 'BinaAz.Application.Features.Commands.User.RefreshLogin.RefreshLoginCommandResponse'.
2023-08-01 10:49:05.574 +04:00 [INF] Executed action BinaAz.API.Controllers.AuthController.RefreshLogin (BinaAz.API) in 17.5789ms
2023-08-01 10:49:05.575 +04:00 [INF] Executed endpoint 'BinaAz.API.Controllers.AuthController.RefreshLogin (BinaAz.API)'
2023-08-01 10:49:05.575 +04:00 [INF] Request finished HTTP/2 GET https://localhost:44371/api/Auth/RefreshLogin?RefreshToken=%2BPaiKOg1kROBY0PVXHcR6omqaHwXV%2FfwfTj9dOTTvLc%3D - - - 200 - application/json;+charset=utf-8 19.1453ms
2023-08-01 10:49:19.419 +04:00 [INF] Request starting HTTP/2 GET https://localhost:44371/api/Auth/RefreshLogin?RefreshToken=mxB%2FUvtdXJydqGYz2nx%2B1%2BC9mwkwQ6zvnlaysY6q2Bw%3D - -
2023-08-01 10:49:19.420 +04:00 [INF] Executing endpoint 'BinaAz.API.Controllers.AuthController.RefreshLogin (BinaAz.API)'
2023-08-01 10:49:19.420 +04:00 [INF] Route matched with {action = "RefreshLogin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RefreshLogin(BinaAz.Application.Features.Commands.User.RefreshLogin.RefreshLoginCommandRequest) on controller BinaAz.API.Controllers.AuthController (BinaAz.API).
2023-08-01 10:49:19.422 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__refreshToken_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."CreatedAt", u."DeletedAt", u."Email", u."HashedPassword", u."Phone", u."RefreshToken", u."RefreshTokenExpires", u."Salt", u."UpdatedAt"
FROM "Users" AS u
WHERE u."RefreshToken" = @__refreshToken_0
LIMIT 1
2023-08-01 10:49:19.430 +04:00 [INF] Executed DbCommand (7ms) [Parameters=[@p9='?' (DbType = Guid), @p0='?' (DbType = DateTime), @p1='?' (DbType = DateTime), @p2='?', @p3='?', @p4='?', @p5='?', @p6='?' (DbType = DateTime), @p7='?', @p8='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Users" SET "CreatedAt" = @p0, "DeletedAt" = @p1, "Email" = @p2, "HashedPassword" = @p3, "Phone" = @p4, "RefreshToken" = @p5, "RefreshTokenExpires" = @p6, "Salt" = @p7, "UpdatedAt" = @p8
WHERE "Id" = @p9;
2023-08-01 10:49:19.431 +04:00 [INF] Executing OkObjectResult, writing value of type 'BinaAz.Application.Features.Commands.User.RefreshLogin.RefreshLoginCommandResponse'.
2023-08-01 10:49:19.432 +04:00 [INF] Executed action BinaAz.API.Controllers.AuthController.RefreshLogin (BinaAz.API) in 11.9168ms
2023-08-01 10:49:19.432 +04:00 [INF] Executed endpoint 'BinaAz.API.Controllers.AuthController.RefreshLogin (BinaAz.API)'
2023-08-01 10:49:19.432 +04:00 [INF] Request finished HTTP/2 GET https://localhost:44371/api/Auth/RefreshLogin?RefreshToken=mxB%2FUvtdXJydqGYz2nx%2B1%2BC9mwkwQ6zvnlaysY6q2Bw%3D - - - 200 - application/json;+charset=utf-8 13.4706ms
2023-08-01 10:49:30.051 +04:00 [INF] Request starting HTTP/2 GET https://localhost:44371/api/Auth/RefreshLogin?RefreshToken=PSqkhDzN8rgN9eQvQDCyXZ7lUvdupzDO7dN0FZsa8Qg%3D - -
2023-08-01 10:49:30.052 +04:00 [INF] Executing endpoint 'BinaAz.API.Controllers.AuthController.RefreshLogin (BinaAz.API)'
2023-08-01 10:49:30.052 +04:00 [INF] Route matched with {action = "RefreshLogin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RefreshLogin(BinaAz.Application.Features.Commands.User.RefreshLogin.RefreshLoginCommandRequest) on controller BinaAz.API.Controllers.AuthController (BinaAz.API).
2023-08-01 10:49:30.055 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__refreshToken_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."CreatedAt", u."DeletedAt", u."Email", u."HashedPassword", u."Phone", u."RefreshToken", u."RefreshTokenExpires", u."Salt", u."UpdatedAt"
FROM "Users" AS u
WHERE u."RefreshToken" = @__refreshToken_0
LIMIT 1
2023-08-01 10:49:30.057 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[@p9='?' (DbType = Guid), @p0='?' (DbType = DateTime), @p1='?' (DbType = DateTime), @p2='?', @p3='?', @p4='?', @p5='?', @p6='?' (DbType = DateTime), @p7='?', @p8='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Users" SET "CreatedAt" = @p0, "DeletedAt" = @p1, "Email" = @p2, "HashedPassword" = @p3, "Phone" = @p4, "RefreshToken" = @p5, "RefreshTokenExpires" = @p6, "Salt" = @p7, "UpdatedAt" = @p8
WHERE "Id" = @p9;
2023-08-01 10:49:30.058 +04:00 [INF] Executing OkObjectResult, writing value of type 'BinaAz.Application.Features.Commands.User.RefreshLogin.RefreshLoginCommandResponse'.
2023-08-01 10:49:30.058 +04:00 [INF] Executed action BinaAz.API.Controllers.AuthController.RefreshLogin (BinaAz.API) in 6.2385ms
2023-08-01 10:49:30.059 +04:00 [INF] Executed endpoint 'BinaAz.API.Controllers.AuthController.RefreshLogin (BinaAz.API)'
2023-08-01 10:49:30.059 +04:00 [INF] Request finished HTTP/2 GET https://localhost:44371/api/Auth/RefreshLogin?RefreshToken=PSqkhDzN8rgN9eQvQDCyXZ7lUvdupzDO7dN0FZsa8Qg%3D - - - 200 - application/json;+charset=utf-8 7.8741ms
2023-08-01 10:49:48.551 +04:00 [INF] Request starting HTTP/2 GET https://localhost:44371/api/Auth/RefreshLogin?RefreshToken=T5NLS3jFZLM1EPKnLspTdSpvGtk2Q1ek%2FzlR%2F3SGs4U%3D - -
2023-08-01 10:49:48.552 +04:00 [INF] Executing endpoint 'BinaAz.API.Controllers.AuthController.RefreshLogin (BinaAz.API)'
2023-08-01 10:49:48.552 +04:00 [INF] Route matched with {action = "RefreshLogin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RefreshLogin(BinaAz.Application.Features.Commands.User.RefreshLogin.RefreshLoginCommandRequest) on controller BinaAz.API.Controllers.AuthController (BinaAz.API).
2023-08-01 10:49:48.556 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__refreshToken_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."CreatedAt", u."DeletedAt", u."Email", u."HashedPassword", u."Phone", u."RefreshToken", u."RefreshTokenExpires", u."Salt", u."UpdatedAt"
FROM "Users" AS u
WHERE u."RefreshToken" = @__refreshToken_0
LIMIT 1
2023-08-01 10:49:48.565 +04:00 [INF] Executed DbCommand (7ms) [Parameters=[@p9='?' (DbType = Guid), @p0='?' (DbType = DateTime), @p1='?' (DbType = DateTime), @p2='?', @p3='?', @p4='?', @p5='?', @p6='?' (DbType = DateTime), @p7='?', @p8='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Users" SET "CreatedAt" = @p0, "DeletedAt" = @p1, "Email" = @p2, "HashedPassword" = @p3, "Phone" = @p4, "RefreshToken" = @p5, "RefreshTokenExpires" = @p6, "Salt" = @p7, "UpdatedAt" = @p8
WHERE "Id" = @p9;
2023-08-01 10:49:48.566 +04:00 [INF] Executing OkObjectResult, writing value of type 'BinaAz.Application.Features.Commands.User.RefreshLogin.RefreshLoginCommandResponse'.
2023-08-01 10:49:48.567 +04:00 [INF] Executed action BinaAz.API.Controllers.AuthController.RefreshLogin (BinaAz.API) in 14.1982ms
2023-08-01 10:49:48.567 +04:00 [INF] Executed endpoint 'BinaAz.API.Controllers.AuthController.RefreshLogin (BinaAz.API)'
2023-08-01 10:49:48.567 +04:00 [INF] Request finished HTTP/2 GET https://localhost:44371/api/Auth/RefreshLogin?RefreshToken=T5NLS3jFZLM1EPKnLspTdSpvGtk2Q1ek%2FzlR%2F3SGs4U%3D - - - 200 - application/json;+charset=utf-8 16.4086ms
2023-08-01 10:49:59.245 +04:00 [INF] Request starting HTTP/2 GET https://localhost:44371/api/Auth/RefreshLogin?RefreshToken=oToel%2FVuhDVyff4LGDViX2WPeuT1wvQW%2BXqSlj9QaFU%3D - -
2023-08-01 10:49:59.246 +04:00 [INF] Executing endpoint 'BinaAz.API.Controllers.AuthController.RefreshLogin (BinaAz.API)'
2023-08-01 10:49:59.246 +04:00 [INF] Route matched with {action = "RefreshLogin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RefreshLogin(BinaAz.Application.Features.Commands.User.RefreshLogin.RefreshLoginCommandRequest) on controller BinaAz.API.Controllers.AuthController (BinaAz.API).
2023-08-01 10:49:59.248 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__refreshToken_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."CreatedAt", u."DeletedAt", u."Email", u."HashedPassword", u."Phone", u."RefreshToken", u."RefreshTokenExpires", u."Salt", u."UpdatedAt"
FROM "Users" AS u
WHERE u."RefreshToken" = @__refreshToken_0
LIMIT 1
2023-08-01 10:49:59.252 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[@p9='?' (DbType = Guid), @p0='?' (DbType = DateTime), @p1='?' (DbType = DateTime), @p2='?', @p3='?', @p4='?', @p5='?', @p6='?' (DbType = DateTime), @p7='?', @p8='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Users" SET "CreatedAt" = @p0, "DeletedAt" = @p1, "Email" = @p2, "HashedPassword" = @p3, "Phone" = @p4, "RefreshToken" = @p5, "RefreshTokenExpires" = @p6, "Salt" = @p7, "UpdatedAt" = @p8
WHERE "Id" = @p9;
2023-08-01 10:49:59.252 +04:00 [INF] Executing OkObjectResult, writing value of type 'BinaAz.Application.Features.Commands.User.RefreshLogin.RefreshLoginCommandResponse'.
2023-08-01 10:49:59.253 +04:00 [INF] Executed action BinaAz.API.Controllers.AuthController.RefreshLogin (BinaAz.API) in 6.6326ms
2023-08-01 10:49:59.253 +04:00 [INF] Executed endpoint 'BinaAz.API.Controllers.AuthController.RefreshLogin (BinaAz.API)'
2023-08-01 10:49:59.253 +04:00 [INF] Request finished HTTP/2 GET https://localhost:44371/api/Auth/RefreshLogin?RefreshToken=oToel%2FVuhDVyff4LGDViX2WPeuT1wvQW%2BXqSlj9QaFU%3D - - - 200 - application/json;+charset=utf-8 8.0852ms
2023-08-01 10:50:18.043 +04:00 [INF] Request starting HTTP/2 GET https://localhost:44371/api/Auth/RefreshLogin?RefreshToken=F6ifmHTUHT%2BmjUFsqTzL8dk8QSt0Br1ZzWODuvI242Q%3D - -
2023-08-01 10:50:18.043 +04:00 [INF] Executing endpoint 'BinaAz.API.Controllers.AuthController.RefreshLogin (BinaAz.API)'
2023-08-01 10:50:18.043 +04:00 [INF] Route matched with {action = "RefreshLogin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RefreshLogin(BinaAz.Application.Features.Commands.User.RefreshLogin.RefreshLoginCommandRequest) on controller BinaAz.API.Controllers.AuthController (BinaAz.API).
2023-08-01 10:50:18.047 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__refreshToken_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."CreatedAt", u."DeletedAt", u."Email", u."HashedPassword", u."Phone", u."RefreshToken", u."RefreshTokenExpires", u."Salt", u."UpdatedAt"
FROM "Users" AS u
WHERE u."RefreshToken" = @__refreshToken_0
LIMIT 1
2023-08-01 10:50:18.051 +04:00 [INF] Executed DbCommand (4ms) [Parameters=[@p9='?' (DbType = Guid), @p0='?' (DbType = DateTime), @p1='?' (DbType = DateTime), @p2='?', @p3='?', @p4='?', @p5='?', @p6='?' (DbType = DateTime), @p7='?', @p8='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Users" SET "CreatedAt" = @p0, "DeletedAt" = @p1, "Email" = @p2, "HashedPassword" = @p3, "Phone" = @p4, "RefreshToken" = @p5, "RefreshTokenExpires" = @p6, "Salt" = @p7, "UpdatedAt" = @p8
WHERE "Id" = @p9;
2023-08-01 10:50:18.052 +04:00 [INF] Executing OkObjectResult, writing value of type 'BinaAz.Application.Features.Commands.User.RefreshLogin.RefreshLoginCommandResponse'.
2023-08-01 10:50:18.052 +04:00 [INF] Executed action BinaAz.API.Controllers.AuthController.RefreshLogin (BinaAz.API) in 8.8931ms
2023-08-01 10:50:18.053 +04:00 [INF] Executed endpoint 'BinaAz.API.Controllers.AuthController.RefreshLogin (BinaAz.API)'
2023-08-01 10:50:18.053 +04:00 [INF] Request finished HTTP/2 GET https://localhost:44371/api/Auth/RefreshLogin?RefreshToken=F6ifmHTUHT%2BmjUFsqTzL8dk8QSt0Br1ZzWODuvI242Q%3D - - - 200 - application/json;+charset=utf-8 10.4675ms
2023-08-01 10:50:36.005 +04:00 [INF] Request starting HTTP/2 GET https://localhost:44371/api/Auth/RefreshLogin?RefreshToken=%3DRHHeGtPzEoL2oFXcVxTMhtR698zwN9JcZKoYMzyIu%2Fg%3D - -
2023-08-01 10:50:36.006 +04:00 [INF] Executing endpoint 'BinaAz.API.Controllers.AuthController.RefreshLogin (BinaAz.API)'
2023-08-01 10:50:36.006 +04:00 [INF] Route matched with {action = "RefreshLogin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RefreshLogin(BinaAz.Application.Features.Commands.User.RefreshLogin.RefreshLoginCommandRequest) on controller BinaAz.API.Controllers.AuthController (BinaAz.API).
2023-08-01 10:50:36.010 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__refreshToken_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."CreatedAt", u."DeletedAt", u."Email", u."HashedPassword", u."Phone", u."RefreshToken", u."RefreshTokenExpires", u."Salt", u."UpdatedAt"
FROM "Users" AS u
WHERE u."RefreshToken" = @__refreshToken_0
LIMIT 1
2023-08-01 10:50:36.018 +04:00 [INF] Executed action BinaAz.API.Controllers.AuthController.RefreshLogin (BinaAz.API) in 11.9003ms
2023-08-01 10:50:36.020 +04:00 [INF] Executed endpoint 'BinaAz.API.Controllers.AuthController.RefreshLogin (BinaAz.API)'
2023-08-01 10:50:36.025 +04:00 [ERR] An unhandled exception has occurred while executing the request.
System.Exception: User Not Found
   at BinaAz.Persistence.Services.AuthService.RefreshLoginAsync(String refreshToken) in C:\Users\Nurlan Khankishiyev\RiderProjects\BinaAz\Infrastructure\BinaAz.Persistence\Services\AuthService.cs:line 46
   at BinaAz.Application.Features.Commands.User.RefreshLogin.RefreshLoginCommandHandler.Handle(RefreshLoginCommandRequest request, CancellationToken cancellationToken) in C:\Users\Nurlan Khankishiyev\RiderProjects\BinaAz\Core\BinaAz.Application\Features\Commands\User\RefreshLogin\RefreshLoginCommandHandler.cs:line 19
   at BinaAz.API.Controllers.AuthController.RefreshLogin(RefreshLoginCommandRequest request) in C:\Users\Nurlan Khankishiyev\RiderProjects\BinaAz\Presentation\BinaAz.API\Controllers\AuthController.cs:line 37
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Program.<>c.<<<Main>$>b__0_2>d.MoveNext() in C:\Users\Nurlan Khankishiyev\RiderProjects\BinaAz\Presentation\BinaAz.API\Program.cs:line 106
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2023-08-01 10:50:36.080 +04:00 [INF] Request finished HTTP/2 GET https://localhost:44371/api/Auth/RefreshLogin?RefreshToken=%3DRHHeGtPzEoL2oFXcVxTMhtR698zwN9JcZKoYMzyIu%2Fg%3D - - - 500 - text/plain;+charset=utf-8 74.9746ms
2023-08-01 10:50:49.955 +04:00 [INF] Request starting HTTP/2 GET https://localhost:44371/api/Auth/RefreshLogin?RefreshToken=RHHeGtPzEoL2oFXcVxTMhtR698zwN9JcZKoYMzyIu%2Fg%3D - -
2023-08-01 10:50:49.955 +04:00 [INF] Executing endpoint 'BinaAz.API.Controllers.AuthController.RefreshLogin (BinaAz.API)'
2023-08-01 10:50:49.956 +04:00 [INF] Route matched with {action = "RefreshLogin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RefreshLogin(BinaAz.Application.Features.Commands.User.RefreshLogin.RefreshLoginCommandRequest) on controller BinaAz.API.Controllers.AuthController (BinaAz.API).
2023-08-01 10:50:49.960 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__refreshToken_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."CreatedAt", u."DeletedAt", u."Email", u."HashedPassword", u."Phone", u."RefreshToken", u."RefreshTokenExpires", u."Salt", u."UpdatedAt"
FROM "Users" AS u
WHERE u."RefreshToken" = @__refreshToken_0
LIMIT 1
2023-08-01 10:50:49.962 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[@p9='?' (DbType = Guid), @p0='?' (DbType = DateTime), @p1='?' (DbType = DateTime), @p2='?', @p3='?', @p4='?', @p5='?', @p6='?' (DbType = DateTime), @p7='?', @p8='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Users" SET "CreatedAt" = @p0, "DeletedAt" = @p1, "Email" = @p2, "HashedPassword" = @p3, "Phone" = @p4, "RefreshToken" = @p5, "RefreshTokenExpires" = @p6, "Salt" = @p7, "UpdatedAt" = @p8
WHERE "Id" = @p9;
2023-08-01 10:50:49.962 +04:00 [INF] Executing OkObjectResult, writing value of type 'BinaAz.Application.Features.Commands.User.RefreshLogin.RefreshLoginCommandResponse'.
2023-08-01 10:50:49.963 +04:00 [INF] Executed action BinaAz.API.Controllers.AuthController.RefreshLogin (BinaAz.API) in 7.2104ms
2023-08-01 10:50:49.963 +04:00 [INF] Executed endpoint 'BinaAz.API.Controllers.AuthController.RefreshLogin (BinaAz.API)'
2023-08-01 10:50:49.964 +04:00 [INF] Request finished HTTP/2 GET https://localhost:44371/api/Auth/RefreshLogin?RefreshToken=RHHeGtPzEoL2oFXcVxTMhtR698zwN9JcZKoYMzyIu%2Fg%3D - - - 200 - application/json;+charset=utf-8 8.5269ms
2023-08-01 10:50:58.544 +04:00 [INF] Request starting HTTP/2 GET https://localhost:44371/api/Auth/RefreshLogin?RefreshToken=QFlD0QMPasV3%2Fxi7bBZblUpqNJHN0rJ1un91ucuUyNI%3D - -
2023-08-01 10:50:58.544 +04:00 [INF] Executing endpoint 'BinaAz.API.Controllers.AuthController.RefreshLogin (BinaAz.API)'
2023-08-01 10:50:58.544 +04:00 [INF] Route matched with {action = "RefreshLogin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RefreshLogin(BinaAz.Application.Features.Commands.User.RefreshLogin.RefreshLoginCommandRequest) on controller BinaAz.API.Controllers.AuthController (BinaAz.API).
2023-08-01 10:50:58.547 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__refreshToken_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."CreatedAt", u."DeletedAt", u."Email", u."HashedPassword", u."Phone", u."RefreshToken", u."RefreshTokenExpires", u."Salt", u."UpdatedAt"
FROM "Users" AS u
WHERE u."RefreshToken" = @__refreshToken_0
LIMIT 1
2023-08-01 10:50:58.562 +04:00 [INF] Executed DbCommand (13ms) [Parameters=[@p9='?' (DbType = Guid), @p0='?' (DbType = DateTime), @p1='?' (DbType = DateTime), @p2='?', @p3='?', @p4='?', @p5='?', @p6='?' (DbType = DateTime), @p7='?', @p8='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Users" SET "CreatedAt" = @p0, "DeletedAt" = @p1, "Email" = @p2, "HashedPassword" = @p3, "Phone" = @p4, "RefreshToken" = @p5, "RefreshTokenExpires" = @p6, "Salt" = @p7, "UpdatedAt" = @p8
WHERE "Id" = @p9;
2023-08-01 10:50:58.562 +04:00 [INF] Executing OkObjectResult, writing value of type 'BinaAz.Application.Features.Commands.User.RefreshLogin.RefreshLoginCommandResponse'.
2023-08-01 10:50:58.562 +04:00 [INF] Executed action BinaAz.API.Controllers.AuthController.RefreshLogin (BinaAz.API) in 18.0926ms
2023-08-01 10:50:58.563 +04:00 [INF] Executed endpoint 'BinaAz.API.Controllers.AuthController.RefreshLogin (BinaAz.API)'
2023-08-01 10:50:58.563 +04:00 [INF] Request finished HTTP/2 GET https://localhost:44371/api/Auth/RefreshLogin?RefreshToken=QFlD0QMPasV3%2Fxi7bBZblUpqNJHN0rJ1un91ucuUyNI%3D - - - 200 - application/json;+charset=utf-8 19.0143ms
2023-08-01 10:51:21.866 +04:00 [INF] Application is shutting down...
2023-08-01 10:54:42.172 +04:00 [INF] User profile is available. Using 'C:\Users\Nurlan Khankishiyev\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2023-08-01 10:54:42.371 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2023-08-01 10:54:42.372 +04:00 [INF] Hosting environment: Development
2023-08-01 10:54:42.372 +04:00 [INF] Content root path: C:\Users\Nurlan Khankishiyev\RiderProjects\BinaAz\Presentation\BinaAz.API
2023-08-01 10:54:42.427 +04:00 [INF] Request starting HTTP/2 GET https://localhost:44371/swagger/index.html - -
2023-08-01 10:54:42.764 +04:00 [INF] Request finished HTTP/2 GET https://localhost:44371/swagger/index.html - - - 200 - text/html;charset=utf-8 342.8529ms
2023-08-01 10:54:43.478 +04:00 [INF] Request starting HTTP/2 GET https://localhost:44371/swagger/v1/swagger.json - -
2023-08-01 10:54:43.835 +04:00 [INF] Request finished HTTP/2 GET https://localhost:44371/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 356.8850ms
2023-08-01 10:54:59.660 +04:00 [INF] Request starting HTTP/2 POST https://localhost:44371/api/Auth/Login application/json 60
2023-08-01 10:54:59.726 +04:00 [INF] Executing endpoint 'BinaAz.API.Controllers.AuthController.Login (BinaAz.API)'
2023-08-01 10:54:59.753 +04:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(BinaAz.Application.Features.Commands.User.LoginUser.LoginUserCommandRequest) on controller BinaAz.API.Controllers.AuthController (BinaAz.API).
2023-08-01 10:55:02.022 +04:00 [INF] Executed DbCommand (23ms) [Parameters=[@__phoneOrEmail_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."CreatedAt", u."DeletedAt", u."Email", u."HashedPassword", u."Phone", u."RefreshToken", u."RefreshTokenExpires", u."Salt", u."UpdatedAt"
FROM "Users" AS u
WHERE u."Email" = @__phoneOrEmail_0 OR u."Phone" = @__phoneOrEmail_0
LIMIT 1
2023-08-01 10:55:02.387 +04:00 [INF] Executed DbCommand (11ms) [Parameters=[@p9='?' (DbType = Guid), @p0='?' (DbType = DateTime), @p1='?' (DbType = DateTime), @p2='?', @p3='?', @p4='?', @p5='?', @p6='?' (DbType = DateTime), @p7='?', @p8='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Users" SET "CreatedAt" = @p0, "DeletedAt" = @p1, "Email" = @p2, "HashedPassword" = @p3, "Phone" = @p4, "RefreshToken" = @p5, "RefreshTokenExpires" = @p6, "Salt" = @p7, "UpdatedAt" = @p8
WHERE "Id" = @p9;
2023-08-01 10:55:02.407 +04:00 [INF] Executing OkObjectResult, writing value of type 'BinaAz.Application.Features.Commands.User.LoginUser.LoginUserCommandResponse'.
2023-08-01 10:55:02.426 +04:00 [INF] Executed action BinaAz.API.Controllers.AuthController.Login (BinaAz.API) in 2667.6422ms
2023-08-01 10:55:02.427 +04:00 [INF] Executed endpoint 'BinaAz.API.Controllers.AuthController.Login (BinaAz.API)'
2023-08-01 10:55:02.439 +04:00 [INF] Request finished HTTP/2 POST https://localhost:44371/api/Auth/Login application/json 60 - 200 - application/json;+charset=utf-8 2779.3623ms
2023-08-01 10:55:40.056 +04:00 [INF] Request starting HTTP/2 POST https://localhost:44371/api/Companies/new - 0
2023-08-01 10:55:40.153 +04:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo: '08/01/2023 06:55:17', Current time: '08/01/2023 06:55:40'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2023-08-01 10:55:40.174 +04:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo: '08/01/2023 06:55:17', Current time: '08/01/2023 06:55:40'.
2023-08-01 10:55:40.183 +04:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo: '08/01/2023 06:55:17', Current time: '08/01/2023 06:55:40'.
2023-08-01 10:55:40.201 +04:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2023-08-01 10:55:40.215 +04:00 [INF] AuthenticationScheme: Bearer was challenged.
2023-08-01 10:55:40.216 +04:00 [INF] Request finished HTTP/2 POST https://localhost:44371/api/Companies/new - 0 - 401 - - 160.8433ms
2023-08-01 10:55:51.950 +04:00 [INF] Request starting HTTP/2 POST https://localhost:44371/api/Auth/Login application/json 60
2023-08-01 10:55:51.960 +04:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo: '08/01/2023 06:55:17', Current time: '08/01/2023 06:55:51'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2023-08-01 10:55:51.961 +04:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo: '08/01/2023 06:55:17', Current time: '08/01/2023 06:55:51'.
2023-08-01 10:55:51.962 +04:00 [INF] Executing endpoint 'BinaAz.API.Controllers.AuthController.Login (BinaAz.API)'
2023-08-01 10:55:51.964 +04:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(BinaAz.Application.Features.Commands.User.LoginUser.LoginUserCommandRequest) on controller BinaAz.API.Controllers.AuthController (BinaAz.API).
2023-08-01 10:55:52.111 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__phoneOrEmail_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."CreatedAt", u."DeletedAt", u."Email", u."HashedPassword", u."Phone", u."RefreshToken", u."RefreshTokenExpires", u."Salt", u."UpdatedAt"
FROM "Users" AS u
WHERE u."Email" = @__phoneOrEmail_0 OR u."Phone" = @__phoneOrEmail_0
LIMIT 1
2023-08-01 10:55:52.130 +04:00 [INF] Executed DbCommand (7ms) [Parameters=[@p9='?' (DbType = Guid), @p0='?' (DbType = DateTime), @p1='?' (DbType = DateTime), @p2='?', @p3='?', @p4='?', @p5='?', @p6='?' (DbType = DateTime), @p7='?', @p8='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Users" SET "CreatedAt" = @p0, "DeletedAt" = @p1, "Email" = @p2, "HashedPassword" = @p3, "Phone" = @p4, "RefreshToken" = @p5, "RefreshTokenExpires" = @p6, "Salt" = @p7, "UpdatedAt" = @p8
WHERE "Id" = @p9;
2023-08-01 10:55:52.134 +04:00 [INF] Executing OkObjectResult, writing value of type 'BinaAz.Application.Features.Commands.User.LoginUser.LoginUserCommandResponse'.
2023-08-01 10:55:52.136 +04:00 [INF] Executed action BinaAz.API.Controllers.AuthController.Login (BinaAz.API) in 171.7895ms
2023-08-01 10:55:52.136 +04:00 [INF] Executed endpoint 'BinaAz.API.Controllers.AuthController.Login (BinaAz.API)'
2023-08-01 10:55:52.138 +04:00 [INF] Request finished HTTP/2 POST https://localhost:44371/api/Auth/Login application/json 60 - 200 - application/json;+charset=utf-8 188.2953ms
2023-08-01 10:56:06.158 +04:00 [INF] Request starting HTTP/2 POST https://localhost:44371/api/Companies/new - 0
2023-08-01 10:56:06.190 +04:00 [INF] Executing endpoint 'BinaAz.API.Controllers.CompaniesController.New (BinaAz.API)'
2023-08-01 10:56:06.196 +04:00 [INF] Route matched with {action = "New", controller = "Companies"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] New() on controller BinaAz.API.Controllers.CompaniesController (BinaAz.API).
2023-08-01 10:56:06.202 +04:00 [INF] Executing StatusCodeResult, setting HTTP status code 200
2023-08-01 10:56:06.203 +04:00 [INF] Executed action BinaAz.API.Controllers.CompaniesController.New (BinaAz.API) in 6.927ms
2023-08-01 10:56:06.203 +04:00 [INF] Executed endpoint 'BinaAz.API.Controllers.CompaniesController.New (BinaAz.API)'
2023-08-01 10:56:06.204 +04:00 [INF] Request finished HTTP/2 POST https://localhost:44371/api/Companies/new - 0 - 200 - - 46.5136ms
2023-08-01 10:56:11.302 +04:00 [INF] Request starting HTTP/2 POST https://localhost:44371/api/Companies/new - 0
2023-08-01 10:56:11.303 +04:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo: '08/01/2023 06:56:07', Current time: '08/01/2023 06:56:11'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2023-08-01 10:56:11.303 +04:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo: '08/01/2023 06:56:07', Current time: '08/01/2023 06:56:11'.
2023-08-01 10:56:11.310 +04:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo: '08/01/2023 06:56:07', Current time: '08/01/2023 06:56:11'.
2023-08-01 10:56:11.310 +04:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2023-08-01 10:56:11.311 +04:00 [INF] AuthenticationScheme: Bearer was challenged.
2023-08-01 10:56:11.311 +04:00 [INF] Request finished HTTP/2 POST https://localhost:44371/api/Companies/new - 0 - 401 - - 8.9552ms
2023-08-01 10:56:13.492 +04:00 [INF] Request starting HTTP/2 POST https://localhost:44371/api/Companies/new - 0
2023-08-01 10:56:13.493 +04:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo: '08/01/2023 06:56:07', Current time: '08/01/2023 06:56:13'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2023-08-01 10:56:13.493 +04:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo: '08/01/2023 06:56:07', Current time: '08/01/2023 06:56:13'.
2023-08-01 10:56:13.493 +04:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo: '08/01/2023 06:56:07', Current time: '08/01/2023 06:56:13'.
2023-08-01 10:56:13.493 +04:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2023-08-01 10:56:13.493 +04:00 [INF] AuthenticationScheme: Bearer was challenged.
2023-08-01 10:56:13.494 +04:00 [INF] Request finished HTTP/2 POST https://localhost:44371/api/Companies/new - 0 - 401 - - 1.4319ms
2023-08-01 10:56:27.443 +04:00 [INF] Request starting HTTP/2 GET https://localhost:44371/api/Auth/RefreshLogin?RefreshToken=jvTvjI066966OLmzSZD3WIoV5vtrmz5Nr1pRysXWLw8%3D - -
2023-08-01 10:56:27.444 +04:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo: '08/01/2023 06:56:07', Current time: '08/01/2023 06:56:27'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2023-08-01 10:56:27.444 +04:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo: '08/01/2023 06:56:07', Current time: '08/01/2023 06:56:27'.
2023-08-01 10:56:27.444 +04:00 [INF] Executing endpoint 'BinaAz.API.Controllers.AuthController.RefreshLogin (BinaAz.API)'
2023-08-01 10:56:27.456 +04:00 [INF] Route matched with {action = "RefreshLogin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RefreshLogin(BinaAz.Application.Features.Commands.User.RefreshLogin.RefreshLoginCommandRequest) on controller BinaAz.API.Controllers.AuthController (BinaAz.API).
2023-08-01 10:56:27.551 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__refreshToken_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."CreatedAt", u."DeletedAt", u."Email", u."HashedPassword", u."Phone", u."RefreshToken", u."RefreshTokenExpires", u."Salt", u."UpdatedAt"
FROM "Users" AS u
WHERE u."RefreshToken" = @__refreshToken_0
LIMIT 1
2023-08-01 10:56:27.554 +04:00 [INF] Executed action BinaAz.API.Controllers.AuthController.RefreshLogin (BinaAz.API) in 98.3313ms
2023-08-01 10:56:27.555 +04:00 [INF] Executed endpoint 'BinaAz.API.Controllers.AuthController.RefreshLogin (BinaAz.API)'
2023-08-01 10:56:27.556 +04:00 [ERR] An unhandled exception has occurred while executing the request.
System.Exception: User Not Found
   at BinaAz.Persistence.Services.AuthService.RefreshLoginAsync(String refreshToken) in C:\Users\Nurlan Khankishiyev\RiderProjects\BinaAz\Infrastructure\BinaAz.Persistence\Services\AuthService.cs:line 46
   at BinaAz.Application.Features.Commands.User.RefreshLogin.RefreshLoginCommandHandler.Handle(RefreshLoginCommandRequest request, CancellationToken cancellationToken) in C:\Users\Nurlan Khankishiyev\RiderProjects\BinaAz\Core\BinaAz.Application\Features\Commands\User\RefreshLogin\RefreshLoginCommandHandler.cs:line 19
   at BinaAz.API.Controllers.AuthController.RefreshLogin(RefreshLoginCommandRequest request) in C:\Users\Nurlan Khankishiyev\RiderProjects\BinaAz\Presentation\BinaAz.API\Controllers\AuthController.cs:line 37
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Program.<>c.<<<Main>$>b__0_2>d.MoveNext() in C:\Users\Nurlan Khankishiyev\RiderProjects\BinaAz\Presentation\BinaAz.API\Program.cs:line 106
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2023-08-01 10:56:27.579 +04:00 [INF] Request finished HTTP/2 GET https://localhost:44371/api/Auth/RefreshLogin?RefreshToken=jvTvjI066966OLmzSZD3WIoV5vtrmz5Nr1pRysXWLw8%3D - - - 500 - text/plain;+charset=utf-8 135.8751ms
2023-08-01 10:56:36.053 +04:00 [INF] Request starting HTTP/2 POST https://localhost:44371/api/Auth/Login application/json 60
2023-08-01 10:56:36.054 +04:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo: '08/01/2023 06:56:07', Current time: '08/01/2023 06:56:36'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2023-08-01 10:56:36.054 +04:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo: '08/01/2023 06:56:07', Current time: '08/01/2023 06:56:36'.
2023-08-01 10:56:36.054 +04:00 [INF] Executing endpoint 'BinaAz.API.Controllers.AuthController.Login (BinaAz.API)'
2023-08-01 10:56:36.054 +04:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(BinaAz.Application.Features.Commands.User.LoginUser.LoginUserCommandRequest) on controller BinaAz.API.Controllers.AuthController (BinaAz.API).
2023-08-01 10:56:36.067 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[@__phoneOrEmail_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."CreatedAt", u."DeletedAt", u."Email", u."HashedPassword", u."Phone", u."RefreshToken", u."RefreshTokenExpires", u."Salt", u."UpdatedAt"
FROM "Users" AS u
WHERE u."Email" = @__phoneOrEmail_0 OR u."Phone" = @__phoneOrEmail_0
LIMIT 1
2023-08-01 10:56:36.076 +04:00 [INF] Executed DbCommand (7ms) [Parameters=[@p9='?' (DbType = Guid), @p0='?' (DbType = DateTime), @p1='?' (DbType = DateTime), @p2='?', @p3='?', @p4='?', @p5='?', @p6='?' (DbType = DateTime), @p7='?', @p8='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Users" SET "CreatedAt" = @p0, "DeletedAt" = @p1, "Email" = @p2, "HashedPassword" = @p3, "Phone" = @p4, "RefreshToken" = @p5, "RefreshTokenExpires" = @p6, "Salt" = @p7, "UpdatedAt" = @p8
WHERE "Id" = @p9;
2023-08-01 10:56:36.076 +04:00 [INF] Executing OkObjectResult, writing value of type 'BinaAz.Application.Features.Commands.User.LoginUser.LoginUserCommandResponse'.
2023-08-01 10:56:36.077 +04:00 [INF] Executed action BinaAz.API.Controllers.AuthController.Login (BinaAz.API) in 22.6889ms
2023-08-01 10:56:36.077 +04:00 [INF] Executed endpoint 'BinaAz.API.Controllers.AuthController.Login (BinaAz.API)'
2023-08-01 10:56:36.077 +04:00 [INF] Request finished HTTP/2 POST https://localhost:44371/api/Auth/Login application/json 60 - 200 - application/json;+charset=utf-8 24.2128ms
2023-08-01 10:56:46.473 +04:00 [INF] Request starting HTTP/2 GET https://localhost:44371/api/Auth/RefreshLogin?RefreshToken=lFvUzc%2F8ZUgBG2rKV3AgsFi%2FMN%2BryK4Mh3PSKhOBlQo%3D - -
2023-08-01 10:56:46.473 +04:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo: '08/01/2023 06:56:07', Current time: '08/01/2023 06:56:46'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2023-08-01 10:56:46.474 +04:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo: '08/01/2023 06:56:07', Current time: '08/01/2023 06:56:46'.
2023-08-01 10:56:46.474 +04:00 [INF] Executing endpoint 'BinaAz.API.Controllers.AuthController.RefreshLogin (BinaAz.API)'
2023-08-01 10:56:46.474 +04:00 [INF] Route matched with {action = "RefreshLogin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RefreshLogin(BinaAz.Application.Features.Commands.User.RefreshLogin.RefreshLoginCommandRequest) on controller BinaAz.API.Controllers.AuthController (BinaAz.API).
2023-08-01 10:56:46.490 +04:00 [INF] Executed DbCommand (11ms) [Parameters=[@__refreshToken_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."CreatedAt", u."DeletedAt", u."Email", u."HashedPassword", u."Phone", u."RefreshToken", u."RefreshTokenExpires", u."Salt", u."UpdatedAt"
FROM "Users" AS u
WHERE u."RefreshToken" = @__refreshToken_0
LIMIT 1
2023-08-01 10:56:46.503 +04:00 [INF] Executed DbCommand (8ms) [Parameters=[@p9='?' (DbType = Guid), @p0='?' (DbType = DateTime), @p1='?' (DbType = DateTime), @p2='?', @p3='?', @p4='?', @p5='?', @p6='?' (DbType = DateTime), @p7='?', @p8='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Users" SET "CreatedAt" = @p0, "DeletedAt" = @p1, "Email" = @p2, "HashedPassword" = @p3, "Phone" = @p4, "RefreshToken" = @p5, "RefreshTokenExpires" = @p6, "Salt" = @p7, "UpdatedAt" = @p8
WHERE "Id" = @p9;
2023-08-01 10:56:46.503 +04:00 [INF] Executing OkObjectResult, writing value of type 'BinaAz.Application.Features.Commands.User.RefreshLogin.RefreshLoginCommandResponse'.
2023-08-01 10:56:46.507 +04:00 [INF] Executed action BinaAz.API.Controllers.AuthController.RefreshLogin (BinaAz.API) in 32.7897ms
2023-08-01 10:56:46.507 +04:00 [INF] Executed endpoint 'BinaAz.API.Controllers.AuthController.RefreshLogin (BinaAz.API)'
2023-08-01 10:56:46.507 +04:00 [INF] Request finished HTTP/2 GET https://localhost:44371/api/Auth/RefreshLogin?RefreshToken=lFvUzc%2F8ZUgBG2rKV3AgsFi%2FMN%2BryK4Mh3PSKhOBlQo%3D - - - 200 - application/json;+charset=utf-8 34.3101ms
2023-08-01 10:58:01.855 +04:00 [INF] Request starting HTTP/2 GET https://localhost:44371/api/Auth/RefreshLogin?RefreshToken=A9Yp77K00blt6vHuD4vT0pFA9cjMeofrgDJRH%2BHUROc%3D - -
2023-08-01 10:58:01.856 +04:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo: '08/01/2023 06:56:07', Current time: '08/01/2023 06:58:01'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2023-08-01 10:58:01.856 +04:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo: '08/01/2023 06:56:07', Current time: '08/01/2023 06:58:01'.
2023-08-01 10:58:01.857 +04:00 [INF] Executing endpoint 'BinaAz.API.Controllers.AuthController.RefreshLogin (BinaAz.API)'
2023-08-01 10:58:01.857 +04:00 [INF] Route matched with {action = "RefreshLogin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RefreshLogin(BinaAz.Application.Features.Commands.User.RefreshLogin.RefreshLoginCommandRequest) on controller BinaAz.API.Controllers.AuthController (BinaAz.API).
2023-08-01 10:58:01.864 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__refreshToken_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."CreatedAt", u."DeletedAt", u."Email", u."HashedPassword", u."Phone", u."RefreshToken", u."RefreshTokenExpires", u."Salt", u."UpdatedAt"
FROM "Users" AS u
WHERE u."RefreshToken" = @__refreshToken_0
LIMIT 1
2023-08-01 10:58:01.865 +04:00 [INF] Executed action BinaAz.API.Controllers.AuthController.RefreshLogin (BinaAz.API) in 7.6339ms
2023-08-01 10:58:01.865 +04:00 [INF] Executed endpoint 'BinaAz.API.Controllers.AuthController.RefreshLogin (BinaAz.API)'
2023-08-01 10:58:01.865 +04:00 [ERR] An unhandled exception has occurred while executing the request.
System.Exception: User Not Found
   at BinaAz.Persistence.Services.AuthService.RefreshLoginAsync(String refreshToken) in C:\Users\Nurlan Khankishiyev\RiderProjects\BinaAz\Infrastructure\BinaAz.Persistence\Services\AuthService.cs:line 46
   at BinaAz.Application.Features.Commands.User.RefreshLogin.RefreshLoginCommandHandler.Handle(RefreshLoginCommandRequest request, CancellationToken cancellationToken) in C:\Users\Nurlan Khankishiyev\RiderProjects\BinaAz\Core\BinaAz.Application\Features\Commands\User\RefreshLogin\RefreshLoginCommandHandler.cs:line 19
   at BinaAz.API.Controllers.AuthController.RefreshLogin(RefreshLoginCommandRequest request) in C:\Users\Nurlan Khankishiyev\RiderProjects\BinaAz\Presentation\BinaAz.API\Controllers\AuthController.cs:line 37
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Program.<>c.<<<Main>$>b__0_2>d.MoveNext() in C:\Users\Nurlan Khankishiyev\RiderProjects\BinaAz\Presentation\BinaAz.API\Program.cs:line 106
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2023-08-01 10:58:01.868 +04:00 [INF] Request finished HTTP/2 GET https://localhost:44371/api/Auth/RefreshLogin?RefreshToken=A9Yp77K00blt6vHuD4vT0pFA9cjMeofrgDJRH%2BHUROc%3D - - - 500 - text/plain;+charset=utf-8 12.7127ms
2023-08-01 10:58:21.858 +04:00 [INF] Application is shutting down...
